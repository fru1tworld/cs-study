# 3. 연산과 스토리지

## 3.1 하둡 이해를 위한 컴퓨터 아키텍처

### 3.1.1 보급형 서버

하둡 클러스터는 4개 또는 8개의 프로세서를 가진 시스템에서도 실행될 수 있지만 대부분 2개의 프로세서를 가진 시스템으로 구성돼 있다.

2개의 CPU는 각각 3개의 코어를 가지고 있고 인터프로세서 링크로 연결돼 있다.

최신 CPU에서 연산 속도를 높이는데 중추적인 역할을 하는 것은 캐시다.

캐시는 메인 메모리에서 가장 자주 사용되는 부분을 아주 빠른 스토리지에 저장한다.

각 프로세서에 있는 CPU 코어는 일반적으로 L1, L2, L3 이렇게 3가지 레벨의 캐시를 두고 있다.

L3 캐시는 일반적으로 프로세서 안에 있는 모든 코어에 공유된다.

모든 캐시는 데이터의 일관성이 보장되어야하고 이를 캐시 일관성이라고 한다.

I/O 연산은 PCI 익스프레스 루트 컴플렉스를 통해 구현된다.

PCI 익스프레스 루트 컴플렉스는 SATA, USB, 이더넷 연결 등 다운스트림 I/O 컨트롤러에 연결된다.

코어, L3 캐시, 메모리 컨트롤러, PCI 익스프레스 루트 컴플렉, 인터커넥트 유닛 등 CPU 모든 내부 구성요소는 온다이 연결 버스를 통해 서로 연결된다.

3개 이상의 CPU를 장착한 보급형 서버는 일반적으로 CPU 인터커넥트를 통해 서로 연결되는 링 토폴로지로 구성되지만, 2개 이하라면 일반 컴퓨터 구조로도 가능하다.

### 3.1.2 서버 CPU와 RAM

x86 아키텍처는 CPU 시장 90% 이상을 점유하고 있다.

상업용 또는 비상업용 분야에서 하둡 ARM 이나 IBM 파워 아키텍처로 포팅하고자 많은 노력을 기울여왔지만, 하둡 공급사는 x86 기반 프로세서와 리눅스 운영체제를 지원하는데 초점을 맞추고 있다.

### 3.1.3 불균일 메모리 접근

### 3.1.4 CPU 사양

### 3.1.5 RAM

## 3.2 엔터프라이즈에 적합한 보급형 스토리지

### 3.2.1 연산 및 스토리지의 모듈성

### 3.2.2 모든 것이 자바

### 3.2.3 복제 또는 이레이저 코딩

### 3.2.4 대안

## 3.3 하둡과 리눅스 스토리지 스택

### 3.3.1 사용자 공간

### 3.3.2 주요 시스템 호출

### 3.3.3 리눅스 페이지 캐시

### 3.3.4 숏서킷 읽기와 제로카피 읽기

### 3.3.5 파일시스템

## 3.4 이레이저 코딩과 복제

### 3.4.1 생각해볼 거리

### 3.4.2 권장 가이드

## 3.5 로우레벨 스토리지

### 3.5.1 스토리지 컨트롤러

### 3.5.2 디스크 계층

## 3.6 서버 폼 팩터

### 3.6.1 폼 팩터 비교

### 3.6.2 가이드

## 3.7 워크로드 프로파일

## 3.8 클러스터 구성과 노드 종류

### 3.8.1 마스터 노드

### 3.8.2 워커 노드

### 3.8.3 유틸리티 노드

### 3.8.4 엣지 노드

### 3.8.5 소형 클러스터 구성

### 3.8.6 중형 클러스터 구성

### 3.8.7 대형 클러스터 구성

## 3.9 정리
