# Docker와 리눅스 가상화 기술 정리

## 1. Docker란?

- **정의**: 애플리케이션을 컨테이너로 패키징, 배포, 실행할 수 있도록 하는 오픈소스 플랫폼.
- **특징**:
  - 컨테이너 기반 가상화 기술.
  - 경량화된 환경 제공 (OS 수준 가상화).
  - 이식성과 확장성 뛰어남.
  - `Dockerfile`로 애플리케이션 환경을 코드로 정의.

---

## 2. Docker의 주요 구성 요소

1. **Docker Engine**:

   - Docker의 핵심, 컨테이너를 실행하고 관리.
   - 구성 요소:
     - **Docker Daemon**: 컨테이너를 실행하고 관리.
     - **Docker CLI**: 명령줄 인터페이스.
     - **REST API**: Docker와 상호작용.

2. **이미지 (Image)**:

   - 컨테이너 실행을 위한 읽기 전용 템플릿.
   - 애플리케이션과 필요한 라이브러리, 설정 등을 포함.

3. **컨테이너 (Container)**:

   - 이미지로부터 생성된 독립 실행 환경.
   - 가볍고 빠르며 OS 커널을 공유.

4. **레지스트리 (Registry)**:
   - Docker 이미지를 저장하고 배포.
   - 예: Docker Hub, Amazon ECR.

---

## 3. Docker의 주요 기능

- **컨테이너 생성 및 실행**: `docker run` 명령으로 컨테이너 실행.
- **이미지 관리**: 이미지를 생성, 태그 지정, 배포.
- **네트워크 관리**: 컨테이너 간 통신을 위한 네트워크 설정.
- **볼륨 관리**: 컨테이너 데이터의 영구 저장.

---

## 4. 리눅스 기반 가상화 기술

Docker는 리눅스의 **커널 기능**을 활용하여 컨테이너를 구현합니다. 주요 가상화 기술 3가지는 다음과 같습니다:

### 4.1 cgroups (Control Groups)

- **정의**: 리눅스 커널에서 리소스 (CPU, 메모리, 네트워크 대역폭 등)를 제한하고 격리하기 위한 기능.
- **Docker 활용**:
  - 컨테이너별 리소스 제한 (예: CPU 사용량 50% 제한).
- **장점**:
  - 효율적 자원 관리.
  - 애플리케이션 성능 보장.

### 4.2 namespaces

- **정의**: 리눅스 커널에서 프로세스와 자원을 격리하는 기술.
- **유형**:
  - **PID namespace**: 프로세스 ID 격리.
  - **NET namespace**: 네트워크 인터페이스 격리.
  - **MNT namespace**: 파일시스템 마운트 포인트 격리.
  - **UTS namespace**: 호스트네임 및 도메인명 격리.
  - **IPC namespace**: 프로세스 간 통신(IPC) 격리.
  - **USER namespace**: 사용자 및 권한 격리.
- **Docker 활용**:
  - 컨테이너별 독립된 네트워크, 파일시스템, PID 관리.

### 4.3 UnionFS (Union File System)

- **정의**: 여러 파일시스템을 하나의 파일시스템으로 병합하는 기술.
- **Docker 활용**:
  - 이미지 레이어링 기술 구현.
  - 읽기 전용 이미지 위에 읽기/쓰기 가능한 컨테이너 레이어 추가.
- **장점**:
  - 저장 공간 효율화.
  - 빠른 이미지 생성 및 배포.

---

## 5. Docker와 전통적인 가상화 기술 비교

| 항목        | Docker (컨테이너) | 전통적인 가상화 기술 (VM) |
| ----------- | ----------------- | ------------------------- |
| 가상화 방식 | OS 수준 가상화    | 하드웨어 수준 가상화      |
| 실행 속도   | 빠름              | 느림                      |
| 리소스 사용 | 경량 (커널 공유)  | 무겁고 자원 소모 큼       |
| 부팅 시간   | 밀리초 수준       | 몇 분                     |
| 호환성      | 동일 커널 기반    | 다양한 OS 실행 가능       |

---

## 6. Docker의 장점과 단점

### 6.1 장점

- **이식성**: 어디서나 동일하게 실행 가능 (로컬, 클라우드 등).
- **경량성**: 호스트 OS의 커널 공유, VM 대비 자원 사용량 적음.
- **확장성**: 대규모 배포와 관리 용이.
- **버전 관리**: 이미지 레이어를 활용한 효율적 관리.

### 6.2 단점

- **보안 이슈**: 커널 공유로 인해 커널 취약점 발생 시 영향을 받을 가능성.
- **운영체제 제한**: 호스트와 동일한 OS 커널만 실행 가능.
- **복잡성**: 네트워킹 및 데이터 관리 설정이 어려울 수 있음.
