# 해시 함수(Hash Function) - 백엔드 신입 면접용 정리

---

## 1. **해시 함수란?**

- **정의**: 임의 길이의 데이터를 고정된 길이의 값으로 매핑하는 함수.
- **목적**: 데이터의 효율적 저장, 검색, 검증을 위해 사용.
- **특징**:
  - **결정적(deterministic)**: 같은 입력은 항상 같은 출력을 생성.
  - **효율성**: 계산이 빠르며 입력 크기에 관계없이 일정 시간 내에 실행.
  - **고정된 출력 길이**: 입력 크기에 관계없이 일정 길이의 결과를 반환.
  - **충돌 최소화**: 서로 다른 입력이 같은 해시 값을 가질 가능성(충돌)이 최소화.
  - **역산 불가능성**: 출력값으로 입력값을 역으로 계산할 수 없어야 함(보안적 측면).

---

## 2. **해시 함수의 주요 용도**

1. **데이터 구조**

   - **해시 테이블(Hash Table)**: 키-값 쌍을 빠르게 저장하고 검색하기 위해 사용.
   - 시간 복잡도: 평균 \(O(1)\) (충돌 시 최악 \(O(n)\)).

2. **데이터 무결성 검증**

   - 파일이 전송 도중 손상되거나 변경되지 않았는지 확인.
   - 예: MD5, SHA-256로 체크섬 생성.

3. **암호학적 보안**

   - 비밀번호 저장, 서명, 메시지 인증 코드(MAC) 생성.
   - 예: PBKDF2, bcrypt, Argon2.

4. **데이터 분배**

   - 분산 시스템에서 데이터를 균등하게 분배.
   - 예: Consistent Hashing.

5. **디지털 서명**

   - 메시지의 원본성과 무결성을 보장.

6. **캐싱**
   - URL, 요청 등을 해싱하여 빠르게 캐싱.

---

## 3. **해시 함수의 종류**

### **3.1. 비암호학적 해시 함수**

- 빠른 계산 속도와 효율성을 중시.
- **사용 예**: 해시 테이블, 데이터 검색.
- **예시**:
  - DJB2
  - MurmurHash
  - CityHash

### **3.2. 암호학적 해시 함수**

- 보안성을 중시하여 충돌 방지, 역산 불가능성 제공.
- **사용 예**: 비밀번호 저장, 데이터 무결성.
- **예시**:
  - MD5 (더 이상 안전하지 않음)
  - SHA-1 (더 이상 안전하지 않음)
  - SHA-256 (SHA-2 계열)
  - SHA-3 (Keccak 알고리즘 기반)
  - bcrypt, Argon2 (비밀번호 해싱)

---

## 4. **해시 함수의 주요 속성**

1. **결정적 속성**

   - 동일한 입력 → 항상 동일한 출력.

2. **고속성**

   - 입력 데이터를 빠르게 해싱할 수 있어야 함.

3. **균등 분포성**

   - 입력 데이터가 고르게 해시 값으로 매핑되어야 함.
   - 데이터 클러스터링 방지.

4. **충돌 저항성**

   - 서로 다른 입력이 동일한 해시 값을 가질 확률(충돌)이 낮아야 함.
   - **완전 충돌 저항성**: \(h(x) = h(y)\)를 만족하는 \(x \neq y\)를 찾기 어려움.
   - **약한 충돌 저항성**: 특정 \(h(x)\)와 동일한 출력 \(h(y)\)를 찾기 어려움.

5. **역산 불가능성**

   - 해시 값만으로 원래 입력값을 추정할 수 없어야 함.

6. **Avalanche Effect**
   - 입력 데이터의 작은 변화가 출력 값 전체를 완전히 바꿔야 함.

---

## 5. **해시 충돌**

### **5.1. 정의**

- 서로 다른 입력이 동일한 해시 값을 가질 때 발생.

### **5.2. 해결 방법**

1. **해시 테이블에서의 충돌**

   - **체이닝(Chaining)**: 동일한 해시 값에 여러 데이터를 연결 리스트로 저장.
   - **오픈 어드레싱(Open Addressing)**: 충돌 시 새로운 빈 슬롯을 찾음.

2. **암호학적 충돌**
   - 보안성이 높은 해시 알고리즘 사용.
   - 예: SHA-256, SHA-3.

---

## 6. **백엔드 관련 면접 질문**

### **6.1. 기초적인 질문**

1. **해시 함수란 무엇이며, 주요 특징은?**
2. **암호학적 해시 함수와 비암호학적 해시 함수의 차이점은?**
3. **SHA-256과 MD5의 차이점은?**

### **6.2. 해시 테이블 관련**

1. **해시 테이블에서 충돌이 발생하면 어떻게 해결하나요?**
2. **해시 함수가 균등 분포를 보장하지 못할 때 문제는 무엇인가요?**

### **6.3. 암호학적 해싱 관련**

1. **왜 비밀번호를 평문으로 저장하면 안 되나요?**
2. **비밀번호 해싱에 bcrypt나 Argon2를 사용하는 이유는?**
3. **SHA-1이 안전하지 않은 이유는 무엇인가요?**

### **6.4. 분산 시스템 관련**

1. **Consistent Hashing이란 무엇이며, 어떤 문제를 해결하나요?**
2. **분산 캐싱 시스템에서 해시 함수의 역할은 무엇인가요?**

### **6.5. 고급 질문**

1. **Avalanche Effect란 무엇이며, 왜 중요한가요?**
2. **비암호학적 해시 함수를 암호학적 목적으로 사용할 수 없는 이유는?**
3. **SHA-256에서 출력이 256비트인 이유는 무엇인가요?**

---

## 7. **주의해야 할 점**

1. **MD5와 SHA-1은 더 이상 안전하지 않음**

   - 충돌 공격이 가능해 데이터 무결성을 보장할 수 없음.

2. **비밀번호 해싱**

   - 단순 해시 함수(SHA-256 등)를 사용하지 말고, bcrypt, Argon2 등의 알고리즘 사용.

3. **해시 충돌 가능성**

   - 해시 함수는 유한한 크기의 결과를 반환하므로, 충분히 큰 데이터셋에서는 충돌 가능성이 존재.

4. **해시 함수의 선택**
   - 데이터 크기, 보안 요구 사항, 성능을 고려하여 적절한 해시 함수 선택.

---

## 8. **추가 심화 주제**

1. **PBKDF2, bcrypt, Argon2의 차이점**
2. **Consistent Hashing 구현 원리**
3. **SHA-2와 SHA-3의 설계 차이**
4. **양자 컴퓨팅이 해시 함수에 미치는 영향**

---

Git의 해시, 비밀번호 해싱, 분산 시스템에서의 데이터 분배 등 다양한 백엔드 분야에서 해시 함수는 핵심 기술로 사용됩니다. 이를 충분히 이해하면 면접에서도 훌륭히 답변할 수 있습니다.

# 6.1. 기초적인 질문

## 1. 해시 함수란 무엇이며, 주요 특징은?

### 정의

입력 데이터를 고정된 크기의 해시 값으로 변환하는 함수.

### 주요 특징

- **결정성**: 동일한 입력은 항상 동일한 해시 값을 생성.
- **고속 연산**: 입력을 빠르게 처리.
- **고정된 출력 크기**: 입력 크기에 관계없이 일정한 길이의 출력 제공.
- **충돌 내성**: 서로 다른 입력이 동일한 해시 값을 가질 가능성이 낮음.

## 2. 암호학적 해시 함수와 비암호학적 해시 함수의 차이점은?

### 암호학적 해시 함수

- **충돌 내성**: 강함.
- **역상 저항성**: 해시 값에서 원본을 추측 불가.
- **용도**: 보안이 중요한 데이터 (비밀번호, 디지털 서명 등)에서 사용.

### 비암호학적 해시 함수

- **충돌 내성**: 상대적으로 약함.
- **빠른 연산**: 목적.
- **용도**: 해시 테이블, 데이터 무결성 등 보안이 덜 중요한 환경에서 사용.

## 3. SHA-256과 MD5의 차이점은?

- **SHA-256**:
  - 출력 길이: 256비트.
  - 보안성: 강한 충돌 내성과 역상 저항성을 제공.
  - 용도: 암호학적 목적, 블록체인 등.
- **MD5**:
  - 출력 길이: 128비트.
  - 보안성: 충돌 공격에 취약.
  - 용도: 데이터 무결성 검증 등 제한된 환경.

---

# 6.2. 해시 테이블 관련

## 1. 해시 테이블에서 충돌이 발생하면 어떻게 해결하나요?

- **체이닝**: 동일한 해시 값의 데이터를 연결 리스트로 저장.
- **오픈 어드레싱**: 충돌 발생 시 다른 빈 슬롯에 데이터를 저장.
  - **선형 탐사**: 연속적으로 빈 슬롯 탐색.
  - **이차 탐사**: 탐색 범위를 제곱 단위로 증가.
  - **이중 해싱**: 다른 해시 함수를 사용해 새로운 위치 계산.

## 2. 해시 함수가 균등 분포를 보장하지 못할 때 문제는 무엇인가요?

- 데이터가 특정 버킷에 집중되어 성능 저하 발생 (클러스터링 문제).
- 최악의 경우, 해시 테이블이 O(n) 성능을 보일 수 있음.
- **해결 방안**:
  - 품질 좋은 해시 함수 사용.
  - 동적 해시 테이블 크기 조정.

---

# 6.3. 암호학적 해싱 관련

## 1. 왜 비밀번호를 평문으로 저장하면 안 되나요?

### 위험성

- 데이터베이스가 유출될 경우 모든 비밀번호가 노출됨.
- 재사용된 비밀번호로 인해 다른 계정도 위험.

### 대안

- 비밀번호를 안전하게 해싱한 뒤 저장.
- `bcrypt`, `Argon2`와 같은 안전한 알고리즘 사용.

## 2. 비밀번호 해싱에 bcrypt나 Argon2를 사용하는 이유는?

- **bcrypt**:
  - Key stretching을 통해 계산 비용 증가.
  - 자동 솔트 추가로 동일 비밀번호에 대한 해시 값 다르게 생성.
- **Argon2**:
  - 메모리-하드 문제를 해결해 GPU 기반 공격에 강함.
  - 다양한 사용자 정의 옵션 제공 (메모리, 연산 비용 등).

## 3. SHA-1이 안전하지 않은 이유는 무엇인가요?

- 충돌 공격이 성공적으로 구현됨.
- Google과 CWI가 2017년 SHA-1 충돌을 증명.
- **대안**: SHA-256, SHA-3 같은 더 안전한 대체 알고리즘 권장.

---

# 6.4. 분산 시스템 관련

## 1. Consistent Hashing이란 무엇이며, 어떤 문제를 해결하나요?

### 정의

분산 시스템에서 데이터 분배를 균등하게 유지하며, 노드 추가/제거 시 재배치 비용을 최소화하는 해싱 기법.

### 해결 문제

- 노드 추가/제거 시 대부분 데이터를 재분배하는 전통적 해싱의 문제.
- 데이터의 위치를 최소한으로 변경하면서 균등 분포 유지.

## 2. 분산 캐싱 시스템에서 해시 함수의 역할은 무엇인가요?

- 데이터를 특정 노드에 매핑하여 저장.
- 데이터 요청 시 적절한 노드를 빠르게 찾음.

### 요구 사항

- 균등 분포.
- 빠른 계산.
- 충돌 최소화.

---

# 6.5. 고급 질문

## 1. Avalanche Effect란 무엇이며, 왜 중요한가요?

### 정의

입력 데이터의 작은 변화가 해시 값 전체에 큰 영향을 미치는 현상.

### 중요성

- 충돌 가능성을 낮추고 보안 강화.
- 데이터 무결성 및 암호학적 강도를 보장.

## 2. 비암호학적 해시 함수를 암호학적 목적으로 사용할 수 없는 이유는?

- 역상 저항성과 충돌 내성이 부족함.
- 예: MurmurHash, CRC는 속도에 초점, 보안 설계가 아님.
- **암호학적 목적**에는 MD5, SHA-1도 부적합 (취약성 존재).

## 3. SHA-256에서 출력이 256비트인 이유는 무엇인가요?

### 보안 강도

- **충돌 내성**: 2²⁵⁶ 계산이 필요.
- **역상 저항성**: 2¹²⁸ 계산이 필요.
- 출력 길이가 보안 수준과 직접 연관.
- 256비트는 대부분의 암호학적 요구 사항을 충족.
