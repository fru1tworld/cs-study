# .9 가상 메모리 관리

## 9.1 요구 페이징

필요세스가 필요한 데이터를 언제 메모리로 가져올지 결정하는 것이 가져오기 정책이다.
일반적인 방법은 프로세스가 요청할 때 메모리로 가져오는 것이므로 이를 요구 페이징이라고 한다.

### 9.1.1 요구 페이징의 개요

컴퓨터를 오래 사용하다 보면 시스템이 느려지는 것을 경험해 보았을 것이다.

이때 컴퓨터 전원을 껐다가 다시 키면 시스템이 빨라진다.

컴퓨터를 오래 켜두었을 때 시스템이 느려지는 것은 작업을 하지 않고 쉬는 프로세스나 좀비 프로세스가 메모리를 차지하여 메모리 관리가 복잡해지기 때문이다.

따라서 메모리에는 꼭 필요한 프로세스만 유지하는 것이 좋다.

용량이 큰 프로세스를 올린다고 가정해보자.

운영체제는 프로세스를 구성하는 모듈을 전부 메모리에 올라오지 않고 필요한 모듈만 일단 올리고 필요하면 일부를 가져온다.

다음과 같은 이유

1. 메모리를 효율적으로 관리하기 위해
2. 응답 속도 향상 : 용량이 큰 프로세스를 전부 갖고 오면 응답이 느리다.

사용자가 요구할 때 해당 페이지를 메모리로 가져오는 것을 요구 페이징이라고 한다.

그래서 필요한 것이라고 예상되어 미리 가져오는 방식이 미리 가져오기다.

미리 가져오기의 예시를 캐시이다.

그러나 미리 가져오기가 실패하면 피해가 매우 커서 현대 운영체제는 요구 페이징을 기본으로 사용한다.

> 요구 페이징과 쓰기 시점 복사
> 요구 페이징은 요구할 때까지 물리 메모리로 가져오는 것을 최대한 미루고 쓰기 시점 복사도 필요하다고 판단될 때까지 데이터 복사를 최대한 미룬다.

> 스와핑과 게으른 스와퍼
> 프로세스 입장에서는 프로세스를 구성하는 모든 페이지가 한번에 올라오는 게 좋은데 이러한게 순수한 스와핑 요구 할 때 메모리에 올리는 것을 게으른 스와퍼라고 한다.

### 9.1.2 페이징 테이블 엔트리의 구조

가상 메모리의 크기는 물리 메모리와 스왑 영역을 합친 것이다.

이때 스왑 영역은 하드 디스크에 존재하나 메모리 관리자가 관리하는 것으로, 가상 메모리의 구성 요소 중 하나다.

스왑 영역에서 물리 메모리로 데이털르 가져오는 스왑인과 물리 메모리에서 스왑 영역으로 데이터를 내보내는 스왑아웃을 나타낸다.

### 9.1.3 페이지 부재

## 9.2 페이지 교체 알고리즘

### 9.2.1 페이지 교체 알고리즘

### 9.2.2 페이지 교체 알고리즘

### 9.2.3 페이지 교체 알고리즘

### 9.2.4 페이지 교체 알고리즘

### 9.2.6 페이지 교체 알고리즘

### 9.2.7 페이지 교체 알고리즘

### 9.2.8 변형 FIFO 알고리즘

## 9.3 스레싱과 프레임 할당

### 9.3.1 스레싱

### 9.3.2 정적 할당

### 9.3.3 동적 할당

### 9.3.4 전역 교체와 지역 교체
