# 프로세스와 스레드

## 3.1 프로세스의 개요

### 3.1.1 프로세스의 개념

폰노이만 구조에서 프로그램이 실행된다는 것은 해당 코드가 메모리에 올라와서 작업이 진행된다는 뜻이다.

우리는 프로그램을 짠다 또는 작성한다라고 표현한다.
프로그램이란 어떤 데이터를 사용하여, 어떤 작업을 할지 그 절차를 적어놓은 것이다.

### 3.1.3 프로그램에서 프로세스로의 전환

PCB가 없으면 프로그램이 프로세스로 전환되지 못한다.

PCB에 있는 다양한 정보가 있는데 대표적인 3가지는 다음과 같다.

- 프로세스 구분자 : ID가 존재한다.
- 메모리 관련 정보: 메모리의 어디에 저장되어있는지 알아야 작업이 가능하다. 이때 경계 레지스터와 한계 레지스터가 같이 존재한다.
- 각종 중간 값: PCB에는 프로세스가 사용했던 중간 값이 저장된다. (컨텍스트 스위치에 필요한 정보들)

프로세스 = 프로그램 + PCB
프로그램 = 프로세스 - PCB

### 3.1.4 프로세스의 상태

일괄 작업 시스템에서는 create, run, terminate 중 하나나가 프로세스의 상태가 된다.
시분할 시스템의 프로세스 상태는 일괄 작업 시스템보다 복잡해서
create, ready, running, terminate 로 존재한다

- create: 메모리에 올라와 실행 준비를 완료한 상태로 PCB가 생성됨
- ready: CPU를 얻을 때까지 기다리는 상태
- running: CPU가 실제 작업을 수행하는 상태
- terminate: PCB가 사라진 상태

여러 프로세스 중 다음에 실행할 프로세스를 선정하는 일은 CPU 스케줄러가 담당한다.
ready -> running : dispatch라 한다.
running -> ready : time out(인터럽트)

프로세스에 배당된 작업 시간을 타임 슬라이스 또는 타임 퀀텀이라 한다.
실행 상태로 들어오면 일정 시간이 흐른 뒤 알려달라고 클록에 요청한다.
타임아웃 밑에 있는 인터럽트의 정확한 표현은 `클록으로부터의 인터럽트`다

효율성을 고려하여 한 가지 상태를 더 만들었는데. 인터럽트 시스템에서 프로세스가 입출력을 요구했다고 가정했을 때 CPU가 직접 데이터를 가져오지 않고 이 상태에서 프로세스는 요청한 작업이 끝날 때까지 다음 작업을 할 수 없다.

따라서 CPU도 아무 작업을 하지 않고 기다리게 되어 효율성이 떨어지는데, 이는 레스토랑의 예에서 새우가 손질되지 않아 기다리는 상황과 같다.

그래서 입출력을 요구한 프로세스가 입출력이 완료될 때까지 기다리는 상태를 대기(blocking) 상태라고 한다.
이는 효율성을 높이기 위해 실행 상태에 두지 않고 대기 상태로 옮기는 것을 의미한다.

대기 상태의 프로세스는 요청힌 I/O가 완료되면 I/O 관리자로부터 인터럽트를 받는다.
이때 실행 상태로 돌아가는게 맞지만 두 프로세스의 상태를 변화시켜야하는 복잡한 상황이므로 대기 상태에서 준비 상태로 간다.

이 외에도 생성, 준비, 실행, 대기 완료 상태로 운영되며 이 다섯 가지 상태를 활성 상태라고 한다.
프로세스의 상태는 활성 상태 외에 휴식 상태와 보류 상태가 있는데 이 상태들은 조금 특별한 경우에 해당한다.

- **휴식 상태**:
  프로세스가 작업을 일시적으로 쉬고 있는 상태다. (실행을 잠시 멈추고 있음)
  사용하던 데이터가 메모리에 그대로 있고 프로세스 제어 블록도 유지되므로 프로세스는 멈춘 지점에서부터 재시작할 수 있음

-**보류 상태**:
프로세스가 메모리에서 잠시 쫓겨난 상태로 휴식 상태와 차이가 있다.
일반적인 프로세스 상태를 활성 상태가 되는데 다음과 같은 경우 보류 상태가 된다.

- 메모리가 꽉 차서 일부 프로세스를 메모리 밖으로 보낼 때
- 프로그램에 오류가 있어서 실행을 미루어야 할 때
- 바이러스와 같이 악의적이라고 판단되는 경우
- 매우 긴 주기로 반복되는 프로세스라 메모리 밖으로 쫓아내도 큰 문제가 없을 때
- 입출력을 기다리는 프로세스의 입출력이 계속 지연될 때
  ![보류 상태를 포함한 프로세스의 상태 ](<../../../images/쉽게배우는운영체제/보류 상태를 포함한 프로세스의 상태.png>)

## 3.2

### 3.2.1

### 3.2.2

## 3.3

### 3.3.1

### 3.3.2

### 3.3.3

### 3.3.4

## 3.4

### 3.4.1

### 3.4.2

### 3.4.3

### 3.4.4
