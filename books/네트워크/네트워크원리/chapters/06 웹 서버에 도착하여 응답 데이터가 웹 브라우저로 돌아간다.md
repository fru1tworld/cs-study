# 6. 서버의 개요

## 6.1 서버의 개요

### 6.1.1 클라이언트와 서버의 차이점

- 웹 서버는 패킷을 수신하여 처리
- 서버는 기동 후 준비 동작을 수행 후 클라이언트 패킷 처리
- 서버와 클라이언트의 네트워크 관련 기능은 동일 (LAN 어댑터, 프로토콜 스택, Socket 라이브러리 등)
- TCP/IP 기능은 하드웨어나 OS에 관계없이 동일

#### 서버와 클라이언트의 사용법 차이

- 클라이언트는 접속을 시도하고 서버는 이를 기다림
- 서버 애플리케이션은 다수의 클라이언트와 동시에 대화
- 클라이언트와 서버는 Socket 라이브러리의 사용법에 차이가 있음

### 6.1.2 서버 애플리케이션의 구조

- 서버는 동시에 여러 클라이언트와 통신을 처리
- 각 클라이언트와 1:1 대응 구조를 가진 서버 프로그램이 일반적
- 서버 프로그램은 `접속 대기 부분`과 `클라이언트와 대화하는 부분`으로 나뉨

#### 동작 과정

1. 서버 기동 후 초기화 작업 수행
2. 클라이언트 접속을 기다리는 소켓 생성 후 대기
3. 클라이언트 접속 시 대화하는 부분에 소켓 전달 후 대화 시작
4. 대화가 끝나면 소켓 종료

#### 문제점 및 해결책

- 새로 프로그램 기동 시 시간이 소요되어 응답 시간이 느려짐
- 클라이언트가 접속했을 때 비어있는 소켓을 찾아 대화를 처리하는 방식으로 해결 가능

### 6.1.3 서버측의 소켓과 포트번호

- 클라이언트와 서버는 접속 동작이 좌우 대칭이 아님
- 접속 동작에서 한쪽은 기다리고 다른 쪽은 접속해야 함
- 클라이언트는 접속을 시도하고 서버는 대기

#### 클라이언트 동작

1. 소켓 생성
2. 포트 번호 지정 (`bind`)
3. 서버에 접속 (`connect`)
4. 데이터 송수신
5. 연결 끊기

#### 서버 동작

1. 소켓 생성
2. 포트 번호 지정 (`bind`)
3. 소켓을 접속 대기 상태로 설정 (`listen`)
4. 접속 패킷 도착 시 접속 수락 (`accept`)
5. 접속 수락 후 새로운 소켓 생성, 클라이언트와 데이터 송수신
6. 연결 끊기 후 소켓 말소

#### 소켓 및 포트 번호 관리

- 서버는 클라이언트와 통신하기 위해 클라이언트와 서버의 IP, 포트 번호를 사용
- 같은 포트 번호를 사용하는 여러 소켓을 구별하기 위해 IP 주소와 포트 번호 조합을 사용
- 접속 대기 소켓과 클라이언트의 소켓은 각각 다른 포트 번호를 가짐

#### 네 가지 정보로 소켓 식별

1. 클라이언트 IP 주소
2. 클라이언트 포트 번호
3. 서버 IP 주소
4. 서버 포트 번호

#### 디스크립터의 필요성

- 접속 전에는 네 가지 정보가 준비되지 않으므로 디스크립터 사용
- 디스크립터는 네 가지 정보 대신 소켓을 간단하게 식별할 수 있음

## 6.2 서버의 수신 동작

### 6.2.1 LAN 어댑터에서 수신 신호를 디지털 데이터로 변환한다.

### 6.2.2

### 6.2.3

### 6.2.4

### 6.2.5

## 6.3

### 6.3.1

### 6.3.2

### 6.3.3

### 6.3.4

## 6.4

### 6.4.1

### 6.4.2
