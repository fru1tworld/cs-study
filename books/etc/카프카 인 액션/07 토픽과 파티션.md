## 7.1 토픽

토픽은 물리적 구조가 아니라 논리적 개념이다.

토픽은 일반적으로 하나의 브로커에만 존재하는 것은 아니다.

대부분의 애플리케이션은 해당 데이터를 단일 토픽에 있는 것으로 보며, 구독하는 데 다른 세부 정보가 필요한 것은 아니다.

그러나 토픽 일므 뒤에는 실제로 데이터를 보유하는 하나 이상의 파티션이 있다.

### 7.1.1 토픽 생성 옵션

또 중요한 결정은 토픽을 생성하기 위해 삭제해야 하는지 여부이다.

- 설정을 통해 삭제할 수 있게 설정할 수 있음

### 7.1.2 복제 팩터

실질적으로 운영되기 위해서는 총 레플리카 수가 브로커 수보다 적거나 같도록 계획해야 한다.

실제로 총 브로커 수보다 많은 레플리카 수로 토픽을 생성하려고 시도하면 InvalidReplicationFactorException 오류가 발생한다.

## 7.2 파티션

컨슈머 입장에서 파티션은 변경할 수 없는 메시지 로그이다.

이 데이터가 실제로 영원히 증가하지 않지만 데이터를 제자리에서 수정하는 것이 아니라 추가하는 것이 유지 관리하기에 좋은 멘탈 모델이다.

또한 컨슈머 클라이언트는 메시지를 직접 삭제할 수 없다.

### 7.2.1 파티션 위치

파티션은 실제 디스크에서 파티션이 하나의 단일 파일이 아니라 여러 세그먼트로 분할됨을 의미한다.

### 7.2.2 로그 보기

## 7.3 EmbeddedKafkaCluster를 사용한 테스트

### 7.3.1 카프카 Testcontainers 사용
