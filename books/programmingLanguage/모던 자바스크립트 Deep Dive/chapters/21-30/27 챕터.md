# chapter27 - 배열

## 27.1 배열이란?

배열은 여러 개의 값을 순차적으로 나열한 자료구조다.

```javascript
const arr = ["apple", "banana", "orange"];
```

배열이 가지고 있는 값을 **요소(element)**라고 부른다. 배열의 요소는 배열에서 자신의 위치를 나타내는 0 이상의 정수인 **인덱스(index)**를 갖는다.

```javascript
arr[0]; // 'apple'
arr[1]; // 'banana'
arr[2]; // 'orange'
```

배열은 요소의 개수, 즉 배열의 길이를 나타내는 **length 프로퍼티**를 갖는다.

```javascript
arr.length; // 3
```

## 27.2 자바스크립트 배열은 배열이 아니다

자바스크립트의 배열은 일반적인 배열의 동작을 흉내 낸 특수한 객체다.

```javascript
console.log(Object.getOwnPropertyDescriptors([1, 2, 3]));
/*
{
  '0': { value: 1, writable: true, enumerable: true, configurable: true },
  '1': { value: 2, writable: true, enumerable: true, configurable: true },
  '2': { value: 3, writable: true, enumerable: true, configurable: true },
  length: { value: 3, writable: true, enumerable: false, configurable: false }
}
*/
```

## 27.3 length 프로퍼티와 희소 배열

```javascript
const arr = [1, 2, 3, 4, 5];

// 현재 length 프로퍼티 값인 5보다 작은 숫자 3을 length 프로퍼티에 할당
arr.length = 3;

console.log(arr); // [1, 2, 3]
```

희소 배열은 length와 배열 요소의 개수가 일치하지 않는다. **희소 배열은 사용하지 않는 것이 좋다.**

```javascript
// 희소 배열
const sparse = [, 2, , 4];

console.log(sparse.length); // 4
console.log(sparse); // [empty, 2, empty, 4]
```

## 27.4 배열 생성

### 배열 리터럴

```javascript
const arr = [1, 2, 3];
console.log(arr.length); // 3
```

### Array 생성자 함수

```javascript
const arr = new Array(10);
console.log(arr); // [empty × 10]
console.log(arr.length); // 10

new Array(1, 2, 3); // [1, 2, 3]
```

### Array.of (ES6)

```javascript
Array.of(1); // [1]
Array.of(1, 2, 3); // [1, 2, 3]
Array.of("string"); // ['string']
```

### Array.from (ES6)

```javascript
// 유사 배열 객체를 변환하여 배열 생성
Array.from({ length: 2, 0: "a", 1: "b" }); // ['a', 'b']

// 이터러블을 변환하여 배열 생성
Array.from("Hello"); // ['H', 'e', 'l', 'l', 'o']
```

## 27.5 배열 요소의 참조

```javascript
const arr = [1, 2];

console.log(arr[0]); // 1
console.log(arr[1]); // 2
console.log(arr[2]); // undefined
```

## 27.6 배열 요소의 추가와 갱신

```javascript
const arr = [0];

// 배열 요소의 추가
arr[1] = 1;

console.log(arr); // [0, 1]
console.log(arr.length); // 2
```

## 27.7 배열 요소의 삭제

```javascript
const arr = [1, 2, 3];

// 배열 요소의 삭제
delete arr[1];
console.log(arr); // [1, empty, 3]

// length 프로퍼티에 영향을 주지 않는다. 희소 배열이 된다.
console.log(arr.length); // 3
```

희소 배열을 만들지 않으면서 배열의 특정 요소를 완전히 삭제하려면 Array.prototype.splice 메서드를 사용한다.

```javascript
const arr = [1, 2, 3];

// Array.prototype.splice(삭제를 시작할 인덱스, 삭제할 요소 수)
arr.splice(1, 1);
console.log(arr); // [1, 3]

console.log(arr.length); // 2
```

## 27.8 배열 메서드

### Array.isArray

```javascript
Array.isArray([]); // true
Array.isArray([1, 2]); // true
Array.isArray(new Array()); // true

Array.isArray(); // false
Array.isArray({}); // false
Array.isArray(null); // false
Array.isArray(1); // false
Array.isArray("Array"); // false
```

### Array.prototype.indexOf

```javascript
const arr = [1, 2, 2, 3];

arr.indexOf(2); // 1
arr.indexOf(4); // -1
arr.indexOf(2, 2); // 2 (두 번째 인수는 검색을 시작할 인덱스)
```

### Array.prototype.push

```javascript
const arr = [1, 2];

let result = arr.push(3, 4);
console.log(result); // 4 (length)

console.log(arr); // [1, 2, 3, 4]
```

### Array.prototype.pop

```javascript
const arr = [1, 2];

let result = arr.pop();
console.log(result); // 2

console.log(arr); // [1]
```

### Array.prototype.unshift

```javascript
const arr = [1, 2];

let result = arr.unshift(3, 4);
console.log(result); // 4

console.log(arr); // [3, 4, 1, 2]
```

### Array.prototype.shift

```javascript
const arr = [1, 2];

let result = arr.shift();
console.log(result); // 1

console.log(arr); // [2]
```

### Array.prototype.concat

```javascript
const arr1 = [1, 2];
const arr2 = [3, 4];

let result = arr1.concat(arr2);
console.log(result); // [1, 2, 3, 4]

// ES6 스프레드 문법
result = [...arr1, ...arr2];
console.log(result); // [1, 2, 3, 4]
```

### Array.prototype.splice

```javascript
const arr = [1, 2, 3, 4];

// 인덱스 1부터 2개의 요소를 제거하고 그 자리에 20, 30을 삽입한다.
const result = arr.splice(1, 2, 20, 30);

console.log(result); // [2, 3]
console.log(arr); // [1, 20, 30, 4]
```

### Array.prototype.slice

```javascript
const arr = [1, 2, 3];

arr.slice(0, 1); // [1]
arr.slice(1, 2); // [2]

// 원본은 변경되지 않는다.
console.log(arr); // [1, 2, 3]
```

### Array.prototype.join

```javascript
const arr = [1, 2, 3, 4];

arr.join(); // '1,2,3,4'
arr.join(""); // '1234'
arr.join(":"); // '1:2:3:4'
```

### Array.prototype.reverse

```javascript
const arr = [1, 2, 3];
const result = arr.reverse();

console.log(arr); // [3, 2, 1]
console.log(result); // [3, 2, 1]
```

### Array.prototype.fill (ES6)

```javascript
const arr = [1, 2, 3];

arr.fill(0);

console.log(arr); // [0, 0, 0]
```

### Array.prototype.includes (ES7)

```javascript
const arr = [1, 2, 3];

arr.includes(2); // true
arr.includes(100); // false
```

### Array.prototype.flat (ES10)

```javascript
[1, [2, 3, 4, 5]].flat(); // [1, 2, 3, 4, 5]

[1, [2, [3, [4]]]].flat(); // [1, 2, [3, [4]]]
[1, [2, [3, [4]]]].flat(1); // [1, 2, [3, [4]]]
[1, [2, [3, [4]]]].flat(2); // [1, 2, 3, [4]]
[1, [2, [3, [4]]]].flat().flat(); // [1, 2, 3, [4]]
[1, [2, [3, [4]]]].flat(Infinity); // [1, 2, 3, 4]
```

## 27.9 배열 고차 함수

### Array.prototype.sort

```javascript
const fruits = ["Banana", "Orange", "Apple"];

fruits.sort();

console.log(fruits); // ['Apple', 'Banana', 'Orange']
```

### Array.prototype.forEach

```javascript
const numbers = [1, 2, 3];
const pows = [];

numbers.forEach((item) => pows.push(item ** 2));
console.log(pows); // [1, 4, 9]
```

### Array.prototype.map

```javascript
const numbers = [1, 2, 3];
const doubles = numbers.map((item) => item * 2);

console.log(doubles); // [2, 4, 6]
```

### Array.prototype.filter

```javascript
const numbers = [1, 2, 3, 4, 5];
const odds = numbers.filter((item) => item % 2);

console.log(odds); // [1, 3, 5]
```

### Array.prototype.reduce

```javascript
const sum = [1, 2, 3, 4].reduce(
  (accumulator, currentValue) => accumulator + currentValue,
  0
);

console.log(sum); // 10
```

### Array.prototype.some

```javascript
[5, 10, 15].some((item) => item > 10); // true
[5, 10, 15].some((item) => item < 0); // false
```

### Array.prototype.every

```javascript
[5, 10, 15].every((item) => item > 3); // true
[5, 10, 15].every((item) => item > 10); // false
```

### Array.prototype.find (ES6)

```javascript
const users = [
  { id: 1, name: "Lee" },
  { id: 2, name: "Kim" },
  { id: 2, name: "Choi" },
  { id: 3, name: "Park" },
];

users.find((user) => user.id === 2); // {id: 2, name: 'Kim'}
```

### Array.prototype.findIndex (ES6)

```javascript
const users = [
  { id: 1, name: "Lee" },
  { id: 2, name: "Kim" },
  { id: 2, name: "Choi" },
  { id: 3, name: "Park" },
];

users.findIndex((user) => user.id === 2); // 1
users.findIndex((user) => user.name === "Park"); // 3
```

### Array.prototype.flatMap (ES10)

```javascript
const arr = ["hello", "world"];

arr.map((x) => x.split("")).flat(); // ['h', 'e', 'l', 'l', 'o', 'w', 'o', 'r', 'l', 'd']
arr.flatMap((x) => x.split("")); // ['h', 'e', 'l', 'l', 'o', 'w', 'o', 'r', 'l', 'd']
```
