## 11.1 들어가며

## 11.2 JIT 컴파일러

핫스팟 가상 머신은 인터프리터로 실행해 해석하고, 그 다음 자주 실행되는 메서드나 코드 블록이 발견되면 해당 코드를 네이티브 코드로 컴파일하고 다양한 최적화를 통해 효율을 높인다.

### 11.2.1 인터프리터와 컴파일러

### 11.2.2 컴파일 대상과 촉발 조건

1. 여러번 호출되는 메서드
2. 여러번 실행되는 순환문의 본문

1번이 가장 직관적인데 2는 한 번만 실행되어도 핫 코드일 수 있다.
그런데 2 유형 모두 컴파일 대상이 본문이 아니라 메서드 전체이다.

여러번의 의미는 구체적으로 무엇일까 ?
메서드 카운터 호출을 증가 시키고 임계값을 넘으면 컴파일러에 컴파일을 요청한다.
그런데 절대 횟수가 아닌 단위 시간당 호출 횟수를 계싼한다.
만약 임계값을 넘지 못하면 값을 반으로 줄인다.

이 방식을 카운터 감쇠 메서드 호출이라 한다.

기본 임계값은 참고로 107000이다.

한편 클라이언트 컴파일러는 간단한 컴파일만해서 빠르지만 서버 컴파일러는 최적화를 적용해서 더 느리다.
그래서 우선 클라이언트 컴파일러를 실행하고 백그라운드로 서버 컴파일러를 수행한다.

## 11.3 AOT 컴파일러

AOT 컴파일러는 프로그램을 실행하기 전에 바이트코드를 기계어로 변환

### 11.3.1 AOT 컴파일러의 장점과 단점

AOT는 프로그램 실행 전에 네이티브 코드로 컴파일하는 단계이고,

### 11.3.2 jaotc의 AOT 컴파일

## 11.4 컴파일러 기법

### 11.4.1 최적화 기법 개요

### 11.4.2 메서드 인라인

### 11.4.3 탈출 분석

### 11.4.4 공통 하위 표현식 제거

### 11.4.5 배열 경계 검사 제거

## 11.5 실전 : 그랄 컴파일러 깊이 이해하기

### 11.5.1 역사적 배경

### 11.5.2 빌드 및 컴파일 환경

### 11.5.3 JVMCI 컴파일러 인터페이스

### 11.5.4 코드 중간 표현

### 11.5.5 코드 최적화와 생성

## 11.6 마치며
