Network Working Group                                          V. Fuller
Request for Comments: 4632                                 Cisco Systems
BCP: 122                                                           T. Li
Obsoletes: 1519                                          Tropos Networks
Category: Best Current Practice                              August 2006


                Classless Inter-domain Routing (CIDR):
          인터넷 주소 할당 및 집계 계획

본 메모의 상태

   이 문서는 인터넷 커뮤니티를 위한 인터넷 최선의 현행 관행(Best Current
   Practices)을 명시하며, 개선을 위한 논의와 제안을 요청합니다. 이 메모의
   배포는 무제한입니다.

저작권 공지

   Copyright (C) The Internet Society (2006).

요약

   이 메모는 주소 공간을 보존하고 글로벌 라우팅 상태의 성장률을 제한하는
   관점에서 기존 32비트 IPv4 주소 공간의 주소 할당 전략을 논의합니다.
   이 문서는 RFC 1519의 원래 Classless Inter-domain Routing(CIDR) 사양을
   폐기(obsolete)하며, 도입된 개념을 명확히 하고, 12년이 넘는 기간이 지난
   후 설명된 기술의 배포 결과에 대해 인터넷 커뮤니티에 업데이트하기 위한
   변경이 이루어졌습니다.


목차

   1. 소개 ............................................................3
   2. 역사 및 문제 설명 ...............................................3
   3. 해결책으로서의 Classless 주소 지정 ..............................4
      3.1. 기본 개념 및 프리픽스 표기법 ...............................5
   4. 주소 할당 및 라우팅 집계 ........................................8
      4.1. 집계 효율성 및 한계 ........................................8
      4.2. 주소 공간의 분산 할당 .....................................10
   5. 라우팅 구현 고려사항 ...........................................11
      5.1. 라우트 광고 규칙 ..........................................11
      5.2. 규칙의 작동 방식 ..........................................12
      5.3. 프리픽스 필터 형식에 대한 참고 .............................13
      5.4. 집계의 책임 및 구성 .......................................13
      5.5. 라우트 전파 및 라우팅 프로토콜 고려사항 ....................15
   6. 새로운 주소 할당 및 라우팅의 예 ................................15
      6.1. 주소 위임 .................................................15
      6.2. 라우팅 광고 ...............................................17
   7. Domain Name Service 고려사항 ...................................18
   8. 장기 해결책으로의 전환 .........................................18
   9. CIDR이 글로벌 라우팅 상태에 미친 영향 분석 .....................19
   10. 결론 및 권고사항 ..............................................20
   11. CIDR 문서의 상태 업데이트 .....................................21
   12. 보안 고려사항 .................................................23
   13. 감사의 말 .....................................................24
   14. 참고문헌 ......................................................25
      14.1. 규범적 참고문헌 ..........................................25
      14.2. 참고적 참고문헌 ..........................................25


1.  소개

   이 메모는 주소 공간을 보존하고 글로벌 라우팅 상태의 성장률을 제한하는
   관점에서 기존 32비트 IPv4 주소 공간의 주소 할당 전략을 논의합니다.
   이 문서는 원래의 CIDR 사양 [RFC1519]을 폐기하며, 도입된 개념을 명확히
   하고, 12년이 넘는 기간이 지난 후 설명된 기술의 배포 결과에 대해 인터넷
   커뮤니티에 업데이트하기 위한 변경이 이루어졌습니다.

2.  역사 및 문제 설명

   현재 인터넷으로 알려진 것은 1970년대에 다양한 네트워크 기술과 함께
   사용할 수 있는 프로토콜 집합을 설계하고 개발하여 다양한 종단 시스템을
   상호 연결하기 위한 원활한 종단간(end-to-end) 기능을 제공하는 연구
   프로젝트로 시작되었습니다. 32비트 주소 공간을 어떻게 사용할 것인지
   결정할 때, 연결될 조직의 수, 조직당 종단 시스템의 수, 그리고 네트워크상의
   총 종단 시스템 수에 대한 특정 가정이 이루어졌습니다. 그 최종 결과는
   세 가지 클래스의 네트워크를 설정한 것이었습니다([RFC791] 참조): Class A
   (최상위 주소 비트 '00'), 128개의 가능한 네트워크와 각각 16777216개의 종단
   시스템(네트워크/브로드캐스트 주소용으로 예약된 특수 비트 값을 뺀 수);
   Class B (MSB '10'), 16384개의 가능한 네트워크와 각각 65536개의 종단
   시스템(예약값 제외); 그리고 Class C (MSB '110'), 2097152개의 가능한
   네트워크와 각각 254개의 종단 시스템(256개 비트 조합에서 예약된 all-zeros
   및 all-ones 패턴을 뺀 수). MSB '111'인 주소 집합은 향후 사용을 위해
   예약되었으며; 이 중 일부는 결국 IPv4 멀티캐스트용으로 정의되었고(MSB
   '1110') 일부는 이 문서 작성 시점에도 여전히 예약되어 있습니다.

   1980년대 후반, 이전 연구 네트워크의 확장과 상용화로 인해 많은 새로운
   조직이 급속히 성장하는 인터넷에 연결되었고, 각 새 조직은 Class A/B/C
   주소 지정 계획에 따른 주소 할당을 필요로 했습니다. 새로운 네트워크 번호
   (특히 Class B 공간)에 대한 수요가 기하급수적 성장률을 보이자, 운영 및
   엔지니어링 커뮤니티의 일부 구성원들은 Class A/B/C 시스템의 장기적 확장
   속성에 대한 우려를 갖기 시작했고, 네트워크 번호 할당 정책과 라우팅
   프로토콜을 수정하여 성장에 대응하는 방법을 생각하기 시작했습니다.
   1991년 11월, Internet Engineering Task Force(IETF)는 상황을 검토하기
   위해 ROAD(Routing and Addressing) 그룹을 창설했습니다. 이 그룹은
   1992년 1월에 모여 세 가지 주요 문제를 식별했습니다:

   1.  Class B 네트워크 주소 공간의 고갈. 이 문제의 근본적인 원인 중
       하나는 중간 규모 조직에 적합한 크기의 네트워크 클래스가 없다는
       것입니다. Class C는 최대 254개의 호스트 주소로 너무 작고,
       Class B는 최대 65534개의 호스트 주소를 허용하여 대부분의 조직에는
       너무 크지만 서브넷팅에 사용할 수 있는 가장 적합한 것이었습니다.

   2.  인터넷 라우터의 라우팅 테이블이 현재의 소프트웨어, 하드웨어 및
       사람이 효과적으로 관리할 수 있는 능력을 초과하여 성장.

   3.  32비트 IPv4 주소 공간의 궁극적인 고갈.

       당시의 인터넷 성장률로 보아 처음 두 문제가 1993년에서 1995년 사이에
       심각해질 것이 분명했습니다. Connectionless Network Service(CLNS)를
       위한 주소 지정의 토폴로지적 할당에 대해 이미 진행 중이던 작업은
       1990년 12월 Boulder IETF에서 커뮤니티에 발표되었고, 32비트 IPv4
       주소 공간을 재구성하여 수명을 연장하는 방법에 대한 생각으로
       이어졌습니다. ROAD 그룹에서의 작업이 이어졌고 결국 [RFC1338]의
       발행으로 이어졌고, 이후 [RFC1519]로 이어졌습니다.

       CIDR의 설계 및 배포는 글로벌 라우팅 테이블의 성장을 늦추고 IPv4
       주소 공간의 소비율을 줄이는 메커니즘을 제공함으로써 이러한 문제를
       해결하기 위한 것이었습니다. 이것은 더 장기적인 성격의 세 번째
       문제를 해결하려고 시도하지 않았으며 시도하지도 않습니다; 대신,
       장기적인 해결책에 대한 진전이 이루어지는 동안 인터넷이 계속
       효율적으로 작동할 수 있도록 단기에서 중기적 어려움을 충분히
       완화하기 위해 노력합니다.

       이 노력과 ROAD 그룹에 대한 더 많은 역사적 배경은 [RFC1380] 및
       [LWRD]에서 찾을 수 있습니다.

3.  해결책으로서의 Classless 주소 지정

   커뮤니티가 만든 해결책은 Class A/B/C 네트워크 주소 할당 시스템을
   폐기하고 "classless"한 계층적 IP 주소 블록(프리픽스라고 함)을 사용하는
   것이었습니다. 프리픽스의 할당은 대략적으로 기본 인터넷 토폴로지를
   따르도록 의도되어 글로벌 라우팅 시스템의 확장을 촉진하기 위해 집계를
   사용할 수 있습니다. 이 전략의 한 가지 함의는 프리픽스 할당 및 집계가
   일반적으로 서비스 제공자-가입자 관계에 따라 수행된다는 것인데, 이는
   인터넷 토폴로지가 그렇게 결정되기 때문입니다.

   [RFC1338] 및 [RFC1519]에서 처음 제안되었을 때, 이 주소 지정 계획은
   약 3~5년 동안 지속되는 비교적 단기적인 대응으로 의도되었으며, 그
   기간 동안 더 영구적인 주소 지정 및 라우팅 아키텍처가 설계되고
   구현될 것이었습니다. 원래 문서의 날짜에서 추론할 수 있듯이, CIDR은
   예상된 수명을 훨씬 초과하였고 위에서 설명한 문제에 대한 중기적
   해결책이 되었습니다.

   다음 텍스트에서 우리는 여기서 논의하는 할당 아키텍처를 구현하기 위해
   마련된 현행 정책 및 절차를 설명합니다. 이 설명은 IANA에 대한 지시로
   해석되어서는 안 됩니다.

   Regional Internet Registries가 구현한 주소 관리 전략(자세한 내용은
   [NRO] 참조)과 결합하여, CIDR 스타일 주소 지정의 배포는 IPv4 주소
   공간이 소비되는 비율도 줄였으며, 따라서 위에서 설명한 문제 #3에
   대한 단기에서 중기적 완화를 제공했습니다.

   정의된 대로, 이 계획은 집계가 어려운 레거시 "Class C" 공간의 부분
   (때때로 "the swamp"이라고 불림)의 재할당을 요구하지도 가정하지도
   않습니다. 그렇게 하면 라우팅 테이블 크기가 다소 줄어들겠지만
   ("the swamp"에는 약 15,000개의 항목이 포함되어 있는 것으로 추정),
   상당한 재번호화 비용이 들 것입니다. 마찬가지로, 종단 사이트가
   중계 서비스 제공자를 변경할 때 재번호화해야 한다는 엄격한 요구사항은
   없지만, 종단 사이트는 글로벌 라우팅 시스템에 자신의 프리픽스를 명시적으로
   광고할 필요성을 제거하기 위해 그렇게 하도록 권장됩니다.

3.1.  기본 개념 및 프리픽스 표기법

   가장 간단한 의미에서, Class A/B/C 네트워크 번호에서 classless 프리픽스로의
   변경은 32비트 IPv4 주소에서 어떤 비트가 사이트와 관련된 네트워크 번호
   (또는 프리픽스)로 해석되고 어떤 비트가 사이트 내에서 개별 종단 시스템에
   번호를 매기는 데 사용되는지를 명시적으로 만드는 것입니다. CIDR 표기법에서
   프리픽스는 전통적인 IPv4 주소 또는 네트워크 번호와 같은 4옥텟 수량으로
   표시되고, 그 뒤에 "/" (슬래시) 문자가 오고, 그 뒤에 유효 비트 수를
   설명하는 0에서 32 사이의 십진수 값이 옵니다.

   예를 들어, 레거시 "Class B" 네트워크 172.16.0.0은 255.255.0.0의 암시적
   네트워크 마스크를 가지며, 프리픽스 172.16.0.0/16으로 정의됩니다. "/16"은
   프리픽스의 네트워크 부분을 추출하기 위한 마스크가 최상위 16비트가 1이고
   최하위 16비트가 0인 32비트 값임을 나타냅니다. 마찬가지로, 레거시 "Class C"
   네트워크 번호 192.168.99.0은 프리픽스 192.168.99.0/24로 정의됩니다;
   최상위 24비트가 1이고 최하위 8비트가 0입니다.

   명시적 프리픽스 길이를 가진 classless 프리픽스를 사용하면 실제 필요에
   따라 훨씬 더 유연한 주소 공간 블록 매칭이 가능합니다. 이전에는 세 가지
   네트워크 크기만 사용 가능했지만, 프리픽스는 1에서 2^32개의 종단 시스템
   주소 사이의 2의 거듭제곱 크기의 블록을 설명하도록 정의될 수 있습니다.
   실제로, 미할당 주소 풀은 Internet Assigned Numbers Authority([IANA])가
   관리합니다. IANA는 필요에 따라 이 풀에서 Regional Internet Registries에
   할당합니다. 이러한 할당은 2^24 주소(일명 /8 프리픽스)의 연속적이고
   비트 정렬된 블록으로 이루어집니다. Regional Internet Registries(RIR)는
   차례로 Local Internet Registries(LIR) 또는 Internet Service
   Providers(ISP)에 더 작은 주소 블록을 할당하거나 배정합니다. 이러한
   기관은 배정을 직접 사용하거나(ISP의 경우 일반적) 고객에게 추가적인
   하위 할당을 할 수 있습니다. 이러한 RIR 주소 배정은 각 ISP 또는 LIR의
   필요에 따라 달라집니다. 예를 들어, 대형 ISP는 2^17 주소의 주소 블록
   (/15 프리픽스)을 할당받을 수 있는 반면, 소형 ISP는 2^11 주소의 주소
   블록(/21 프리픽스)을 할당받을 수 있습니다.

   "allocate"(할당)와 "assign"(배정)이라는 용어는 인터넷 주소 레지스트리
   시스템에서 특정한 의미를 가집니다; "allocate"는 추가적인 하위 위임을
   수행할 것으로 예상되는 조직에 주소 공간 블록을 위임하는 것을 의미하고,
   "assign"은 받은 주소 블록을 직접 사용하는(즉, 개별 호스트에 번호를
   매기는) 사이트에 사용됩니다.

   다음 표는 모든 CIDR 프리픽스 크기에 대한 편리한 요약을 제공하며,
   각 프리픽스에서 가능한 주소 수와 32비트 IPv4 주소 공간에서 해당 크기의
   프리픽스가 몇 개 번호를 매길 수 있는지를 보여줍니다:

       notation       addrs/block      # blocks
       --------       -----------     ----------
       n.n.n.n/32               1     4294967296    "host route"
       n.n.n.x/31               2     2147483648    "p2p link"
       n.n.n.x/30               4     1073741824
       n.n.n.x/29               8      536870912
       n.n.n.x/28              16      268435456
       n.n.n.x/27              32      134217728
       n.n.n.x/26              64       67108864
       n.n.n.x/25             128       33554432
       n.n.n.0/24             256       16777216    legacy "Class C"
       n.n.x.0/23             512        8388608
       n.n.x.0/22            1024        4194304
       n.n.x.0/21            2048        2097152
       n.n.x.0/20            4096        1048576
       n.n.x.0/19            8192         524288
       n.n.x.0/18           16384         262144
       n.n.x.0/17           32768         131072
       n.n.0.0/16           65536          65536    legacy "Class B"
       n.x.0.0/15          131072          32768
       n.x.0.0/14          262144          16384
       n.x.0.0/13          524288           8192
       n.x.0.0/12         1048576           4096
       n.x.0.0/11         2097152           2048
       n.x.0.0/10         4194304           1024
       n.x.0.0/9          8388608            512
       n.0.0.0/8         16777216            256    legacy "Class A"
       x.0.0.0/7         33554432            128
       x.0.0.0/6         67108864             64
       x.0.0.0/5        134217728             32
       x.0.0.0/4        268435456             16
       x.0.0.0/3        536870912              8
       x.0.0.0/2       1073741824              4
       x.0.0.0/1       2147483648              2
       0.0.0.0/0       4294967296              1    "default route"

   n은 8비트 십진 옥텟 값입니다. 점대점 링크는 [RFC3021]에서 더 자세히
   논의됩니다.

   x는 프리픽스 길이에 기반한 1~7비트 값으로, 옥텟의 최상위 비트로
   시프트되어 십진수 형태로 변환됩니다; 옥텟의 최하위 비트는 0입니다.

   실제로, 8보다 짧은 길이의 프리픽스는 현재까지 할당되거나 배정된 적이
   없지만, 적극적인 집계가 수행될 경우 이러한 짧은 프리픽스에 대한 라우트가
   라우팅 테이블에 존재할 수 있습니다. 이 문서 작성 시점에서, 그러한 라우트는
   글로벌 라우팅 시스템에서 관찰되지 않지만, 운영자 오류 및 기타 이벤트로
   인해 일부(즉, 128.0.0.0/1 및 192.0.0.0/2)가 과거에 일부 네트워크에서
   때때로 관찰된 적이 있습니다.

4.  주소 할당 및 라우팅 집계

   Classless 주소 지정 및 라우팅은 처음에 주로 글로벌 인터넷에서 라우팅의
   확장 속성을 개선하기 위해 개발되었습니다. 라우팅의 확장은 주소가
   사용되는 방식과 매우 밀접하게 결합되어 있기 때문에, CIDR의 배포는
   주소가 할당되는 방식에 영향을 미쳤습니다.

4.1.  집계 효율성 및 한계

   패킷 교환 네트워크에서 라우팅 상태를 줄이는 유일하게 일반적으로
   이해되는 방법은 정보의 집계를 통한 것입니다. CIDR이 글로벌 라우팅
   시스템의 크기와 성장률을 줄이는 데 성공하려면, IPv4 주소 할당 프로세스를
   변경하여 토폴로지 노선을 따라 라우팅 정보의 집계를 가능하게 해야
   했습니다. 일반적으로 네트워크의 토폴로지는 이를 구축한 서비스 제공자에
   의해 결정되므로, 토폴로지적으로 의미 있는 주소 할당은 반드시 서비스
   제공자 지향적입니다.

   하나의 서비스 제공자에 연결된 종단 사이트에 대한 집계는 간단합니다:
   서비스 제공자가 할당한 주소 공간을 사용하며, 그 주소 공간은 서비스
   제공자에게 할당된 더 큰 블록의 작은 부분입니다. 종단 사이트에 대한
   명시적 라우트는 필요하지 않습니다; 서비스 제공자가 더 큰 블록에 대한
   단일 집계 라우트를 광고합니다. 이 광고는 블록에 번호가 매겨진 모든
   고객에 대한 도달 가능성과 라우팅 가능성을 제공합니다.

   집계의 효과를 줄이는 두 가지 더 복잡한 상황이 있습니다:

   o  멀티홈(multi-homed)인 조직. 멀티홈 조직은 각 서비스 제공자에
      의해 시스템에 광고되어야 하므로, 라우팅 정보를 해당 제공자 중
      하나의 주소 공간으로 집계하는 것이 종종 실현 가능하지 않습니다.
      조직은 여전히 서비스 제공자의 주소 공간에서 주소 할당을 받을 수
      있지만(이는 다른 이점이 있음), 조직의 프리픽스에 대한 라우트는
      가장 일반적인 경우에 모든 서비스 제공자에 의해 명시적으로
      광고됩니다. 이러한 이유로, 멀티홈 조직의 글로벌 라우팅 비용은
      일반적으로 CIDR 채택 이전과 동일합니다. 멀티호밍 관행에 대한
      더 자세한 고려는 [RFC4116]에서 찾을 수 있습니다.

   o  서비스 제공자를 변경하지만 재번호화하지 않는 조직. 이는 원래
      서비스 제공자의 집계된 라우트 광고 중 하나에 "구멍을 뚫는" 효과를
      가집니다. CIDR은 새로운 서비스 제공자가 재홈된 조직에 대한
      특정 광고를 광고하도록 요구하여 이 상황을 처리합니다; 이 광고는
      더 긴 매칭이기 때문에 제공자 집계보다 우선됩니다. 집계의 효율성을
      유지하기 위해, 서비스 제공자를 변경하는 조직은 결국 자신의
      네트워크를 새 제공자의 주소 공간에서 할당된 프리픽스로 마이그레이션
      할 것을 권장합니다. 이를 위해, [RFC2131]을 사용하는 동적 호스트
      주소 할당과 같은 마이그레이션을 용이하게 하는 메커니즘을 가능한
      한 배포하고, 재번호화를 위한 개선된 기술을 개발하기 위한 추가
      프로토콜 작업이 수행될 것을 권장합니다.

   멀티홈 사이트(그리고 일반적으로 여러 논리적 IPv4 네트워크로 구성된
   모든 사이트)에 대해 일부 집계 효율성 이득을 여전히 얻을 수 있다는
   점에 유의하십시오; 사이트에 연속적인 2의 거듭제곱 블록 주소 공간을
   할당함으로써(여러 개의 독립적인 프리픽스 대신), 사이트의 라우팅
   정보를 단일 프리픽스로 집계할 수 있습니다. 또한, 멀티홈 사이트에
   서비스 제공자의 주소 공간에서 할당하는 것과 관련된 라우팅 비용은
   중앙 기관에 의한 순차적 번호 할당의 이전 방법보다 크지 않으므로,
   모든 종단 사이트 주소 공간을 서비스 제공자에게 할당된 블록에서
   할당하는 것이 합리적입니다.

   집계가 시스템의 여러 수준에서 발생할 수 있으므로, 존재할 수 있는
   계층의 상위 수준에서 이러한 비정상적인 라우트를 집계하는 것이
   여전히 가능할 수 있다는 점도 언급할 가치가 있습니다. 예를 들어,
   한 사이트가 동일한 대형 제공자로부터 연결성과 주소 공간을 모두
   얻는 비교적 소규모의 두 제공자에 멀티홈되어 있다면, 소규모
   네트워크로부터의 라우트에 대한 대형 제공자의 집계에는 멀티홈
   사이트로의 모든 라우트가 포함됩니다. 이러한 종류의 2차 수준 집계의
   실현 가능성은 사이트, 직접 연결된 제공자, 그리고 그들이 연결된
   다른 제공자 사이에 토폴로지적 계층이 존재하는지에 따라 달라지며;
   글로벌 인터넷의 일부 지역에서는 실용적일 수 있지만 다른 지역에서는
   그렇지 않을 수 있습니다.

   참고: 다음 논의와 예에서, 프리픽스 표기법은 라우팅 목적지를
   나타내기 위해 사용됩니다. 이는 설명을 위한 것일 뿐이며 라우팅
   프로토콜이 업데이트에서 이 표현을 사용해야 한다는 것을 요구하지
   않습니다.

4.2.  주소 공간의 분산 할당

   인터넷 초기에 IPv4 주소 공간 할당은 중앙 Network Information
   Center(NIC)에 의해 수행되었습니다. Class A/B/C 네트워크 번호는
   요청한 조직의 규모에 따라 본질적으로 임의의 순서로 할당되었습니다.
   모든 할당은 중앙에 기록되었으며, 라우팅 집계를 가능하게 하는 방식으로
   네트워크 번호를 할당하려는 시도는 이루어지지 않았습니다.

   CIDR이 원래 배포되었을 때, 중앙 할당 기관은 계속 존재했지만 절차를
   변경하여 각 서비스 제공자에게 대규모 "Class C" 네트워크 번호 블록을
   할당했습니다. 각 서비스 제공자는 차례로 제공자의 주소 공간의 비트마스크
   지향 하위 집합을 각 고객에게 할당했습니다. 이는 서비스 제공자의 수가
   비교적 적고 비교적 일정한 한 합리적으로 잘 작동했지만, 서비스 제공자의
   수가 빠른 속도로 증가하면서 잘 확장되지 않았습니다.

   1990년대에 인터넷이 급속히 확장되기 시작하면서, 단일 중앙 집중식 주소
   할당 기관이 문제가 있다는 것이 분명해졌습니다. 이 기능은 유럽 인터넷
   사이트에 대한 주소 공간 할당이 16777216 주소의 비트 정렬 블록(CIDR이
   나중에 /8로 정의할 것)으로 RIPE NCC([RIPE])에 위임되면서 분산화되기
   시작하여, 사실상 최초의 RIR이 되었습니다. 그 이후로, 주소 할당은
   IANA, RIR, 그리고 서비스 제공자를 통한 계층적 기능으로 공식적으로
   분산되었습니다. 글로벌 인터넷 주소 공간에 대한 책임을 가진 단일 조직의
   병목 현상을 제거함으로써 새로운 할당의 효율성과 응답 시간이 크게
   개선되었습니다.

   이러한 방식의 계층적 주소 위임은 특정 서비스 제공자에서 할당된 주소를
   가진 사이트가 라우팅 목적상 해당 서비스 제공자의 일부이며 그 인프라를
   통해 라우팅될 것임을 의미합니다. 이는 멀티홈 조직(즉, 둘 이상의 네트워크
   서비스 제공자에 연결된 조직)에 대한 라우팅 정보가 여전히 계층의 상위
   수준에서 알려져야 함을 의미합니다.

   이러한 문제에 대한 역사적 관점은 [RFC1518]에 설명되어 있습니다.
   추가 논의는 [RFC3221]에서도 찾을 수 있습니다.

5.  라우팅 구현 고려사항

   classful 네트워크 번호에서 classless 프리픽스로의 변경으로, IPv4 주소의
   초기 비트 패턴에서 네트워크 마스크를 추론하는 것이 불가능해졌습니다.
   이는 라우팅 정보가 저장되고 전파되는 방식에 영향을 미칩니다. 네트워크
   마스크 또는 프리픽스 길이는 라우팅 프로토콜에서 명시적으로 전달되어야
   합니다. OSPF [RFC2328], Intermediate System to Intermediate System
   (IS-IS) [RFC1195], RIPv2 [RFC2453], Cisco Enhanced Interior Gateway
   Routing Protocol (EIGRP)과 같은 내부 라우팅 프로토콜과 BGP4 외부
   라우팅 프로토콜 [RFC4271]은 모두 이 기능을 지원하며, 1990년대 classless
   inter-domain 라우팅 배포의 일부로 개발되거나 수정되었습니다.

   RIP [RFC1058], HELLO, Cisco Interior Gateway Routing Protocol(IGRP)과
   같은 이전의 내부 라우팅 프로토콜과 Exterior Gateway Protocol(EGP)
   [RFC904]과 같은 이전의 외부 라우팅 프로토콜은 프리픽스 길이/마스크의
   명시적 전달을 지원하지 않으며 따라서 매우 제한된 스텁 구성 이외에는
   인터넷에서 효과적으로 사용할 수 없습니다. 단순한 레거시 종단 사이트
   구성에서의 사용이 적절할 수 있지만, 이들은 구식으로 간주되며 글로벌
   인터넷에 연결된 중계 네트워크에서 사용해서는 안 됩니다(SHOULD NOT).

   마찬가지로, 레이어 3 네트워크 장비의 라우팅 및 포워딩 테이블은 프리픽스와
   프리픽스 길이 또는 마스크를 모두 저장하도록 구성되어야 합니다. 레거시
   Class A/B/C 네트워크/서브넷 규칙에 따라 라우팅/포워딩 정보를 구성하는
   장비는 글로벌 인터넷에 연결된 네트워크에서 올바르게 작동할 것으로
   기대할 수 없습니다; 그러한 장비의 사용은 권장되지 않습니다. 다행히,
   오늘날 그러한 장비는 거의 사용되지 않습니다.

5.1.  라우트 광고 규칙

   1.  인터넷에서의 포워딩은 최장 매칭(longest-match) 기반으로 수행됩니다.
       이는 라우팅 도메인에 대해 멀티홈인 목적지가 항상 해당 라우팅
       도메인에 명시적으로 알려져야 함을 의미합니다(즉, 요약할 수 없음).
       네트워크가 멀티홈인 경우, 네트워크 계층에서 "상위"인 라우팅
       도메인으로의 모든 경로가 "상위" 네트워크에 알려져야 합니다.

   2.  여러 개의 더 구체적인 라우트에 대한 집계 라우트를 생성하는 라우터는
       집계 라우트에는 매칭되지만 더 구체적인 라우트에는 매칭되지 않는
       패킷을 폐기해야 합니다. 다시 말해, 집계 라우트의 "next hop"은
       null 목적지여야 합니다. 이는 집계로 커버되는 일부 주소에 도달할
       수 없을 때 포워딩 루프를 방지하기 위해 필요합니다.

   장애 발생 시, 하나의 서비스 제공자로부터 주소 공간을 가져오지만 실제로는
   다른 서비스 제공자를 통해서만 도달 가능한 사이트(즉, 서비스 제공자를
   변경한 사이트의 경우)로의 트래픽의 부분적 라우팅이 발생할 수 있는데,
   이러한 트래픽이 집계된 라우트에 의해 광고된 경로를 따라 포워딩되기
   때문입니다. 규칙 #2는 그러한 트래픽이 집계된 라우트의 광고자에 의해
   폐기되도록 하여 패킷의 잘못된 전달을 방지하지만, "traceroute" 및
   기타 유사한 도구의 출력은 더 이상 더 구체적인 프리픽스를 광고하지
   않는 네트워크가 아니라 해당 네트워크 내에 문제가 존재한다고 제안할
   것입니다. 이는 연결 문제를 진단하려는 사람들에게 혼란을 줄 수 있습니다;
   자세한 내용은 섹션 6.2의 예를 참조하십시오. 이 인지된 "문제"에 대한
   해결책은 이 문서의 범위를 벗어나며; 이는 라우팅 기술이 아닌 사용자/
   운영자 커뮤니티의 더 나은 교육에 달려 있습니다.

   이러한 규칙을 따르는 구현은 또한 일반화되어야 하며, 모든 라우팅
   목적지에 대해 임의의 네트워크 번호와 마스크가 수용되어야 합니다.
   유일한 미해결 제약은 마스크가 왼쪽으로 연속적이어야 한다는 것입니다.
   프리픽스 0.0.0.0/0에 대한 퇴화된 라우트는 기본 라우트로 사용되며
   모든 구현에서 수용되어야 합니다(MUST). 또한, 도메인 간 프로토콜을
   통한 이 라우트의 우발적 광고를 방지하기 위해, 이 라우트는 라우터가
   명시적으로 그렇게 하도록 구성된 경우에만 다른 라우팅 도메인에
   광고되어야 하며, 구성되지 않은 "기본" 옵션으로는 절대 광고되어서는
   안 됩니다.

5.2.  규칙의 작동 방식

   규칙 #1은 사용되는 포워딩 알고리즘이 라우팅 프로토콜과 구현에 걸쳐
   일관성 있음을 보장합니다. 멀티홈 네트워크는 라우팅되는 모든 서비스
   제공자에 의해 항상 명시적으로 광고되며, 이는 하나의 서비스 제공자
   집계의 특정 하위 집합인 경우에도 마찬가지입니다(그렇지 않은 경우
   명시적으로 광고되어야 함이 분명합니다). "1차" 서비스 제공자가 멀티홈
   사이트를 자신의 집계의 일부로 암시적으로 광고할 수 있는 것처럼 보일
   수 있지만, 최장 매칭 포워딩으로 인해 이는 작동하지 않습니다. 더 자세한
   내용은 [RFC4116]에 제공됩니다.

   규칙 #2는 집계로 인한 라우팅 루프가 형성되지 않도록 보장합니다.
   192.168.0.0/16을 가진 "상위" 제공자에 의해 192.168.64/19를 할당받은
   사이트를 고려하십시오. "상위" 네트워크는 "하위" 네트워크에
   192.168.0.0/16을 광고할 것입니다. "하위" 네트워크가 192.168.65.0/24
   (집계의 일부)에 대한 내부 연결을 잃는 경우, "상위"에서 "하위"로
   192.168.65.1을 목적지로 하는 트래픽은 "하위"가 광고한 라우트를
   따를 것입니다. 그러나 해당 트래픽이 "하위"에 도착했을 때, 하위는
   라우트 192.168.0.0/16을 따라 "상위"로 돌아가서는 *안 됩니다*, 이는
   포워딩 루프를 초래할 것이기 때문입니다. 규칙 #2는 "하위"가 자신의
   집계된 라우트 중 하나에 매칭되는 목적지에 대해 덜 구체적인 라우트를
   따를 수 없다고 말합니다(일반적으로 이는 한 네트워크가 다른 네트워크에
   광고하는 모든 집계된 프리픽스에 대해 "discard" 또는 "null" 라우트를
   설치하여 구현됩니다). "default" 라우트(0.0.0.0/0)의 처리는 이 규칙의
   특수한 경우라는 점에 유의하십시오; 네트워크는 자신의 집계된 광고의
   일부인 목적지에 대해 기본 라우트를 따라서는 안 됩니다.

5.3.  프리픽스 필터 형식에 대한 참고

   라우트 공지를 처리하는 시스템은 수신하는 정보가 정책 규칙에 따라
   허용 가능한지 확인할 수 있어야 합니다. 라우트 광고를 필터링하는
   구현은 필터 요소에서 마스크 또는 프리픽스 길이를 허용해야 합니다.
   따라서, 이전에 다음과 같이 지정되던 필터 요소는

      accept 172.16.0.0
      accept 172.25.120.0.0
      accept 172.31.0.0
      deny 10.2.0.0
      accept 10.0.0.0

   이제 다음과 같은 형태가 됩니다:

      accept 172.16.0.0/16
      accept 172.25.0.0/16
      accept 172.31.0.0/16
      deny 10.2.0.0/16
      accept 10.0.0.0/8

   이는 단순히 Class A/B/C 네트워크 번호 분류에 의해 암시되던 네트워크
   마스크를 명시적으로 만드는 것입니다. 프리픽스와 동일한 비트 패턴을
   가진 모든 더 구체적인 프리픽스의 매칭을 허용하도록 필터링 기능을
   향상시키는 것도 유용합니다; 다행히, 이 기능은 인터넷에서 사용되는
   대부분의 장비 제조업체에 의해 구현되었습니다.

5.4.  집계의 책임 및 구성

   정상적인 상황에서, 프리픽스 집합을 할당받거나 배정받은 라우팅 도메인
   (또는 "Autonomous System")은 해당 프리픽스의 집계에 대한 단독 책임을
   가집니다. 일반적인 경우, AS는 내부 라우팅 시스템에 알려진 더 구체적인
   라우트를 기반으로 집계 라우트를 생성하기 위해 하나 이상의 라우터에
   구성을 설치합니다. 이러한 집계 라우트는 라우팅 도메인의 경계 라우터에
   의해 글로벌 라우팅 시스템에 광고됩니다. 집계 라우트와 겹치는 더 구체적인
   내부 라우트는 전 세계적으로 광고되어서는 안 됩니다. 일부 경우, AS는
   다른 AS에 집계 책임을 위임하기를 원할 수 있습니다(예를 들어, 고객이
   자신을 대신하여 집계된 라우팅 정보를 생성하도록 서비스 제공자에게
   원할 수 있음); 이러한 경우, 집계는 첫 번째 AS로부터 수신한 라우트와
   해당 라우트를 어떻게 집계해야 하는지를 설명하는 구성된 정책 정보를
   결합하여 두 번째 AS의 라우터에 의해 수행됩니다.

   한 제공자가 명시적 합의 없이 다른 제공자로부터 수신한 라우트에 대해
   집계를 수행하기로 선택할 수 있다는 점에 유의하십시오; 이를 "proxy
   aggregation"이라고 합니다. 이는 AS가 전달하고 고객과 이웃에게 전파해야
   하는 라우팅 상태의 양을 줄이는 데 유용한 도구가 될 수 있습니다. 그러나
   proxy aggregation은 트래픽 엔지니어링에서 의도하지 않은 결과를 초래할
   수도 있습니다. AS 2와 AS 3 모두 AS 1로부터 라우트를 수신하지만 AS 2가
   proxy aggregation을 수행하고 AS 3은 수행하지 않는 경우 어떻게 되는지
   생각해 보십시오. AS 2와 AS 3 모두로부터 중계 라우팅 정보를 수신하는
   다른 AS들은 AS 1이 생성한 라우팅 정보에 대해 불일치하는 뷰를 보게 됩니다.
   이는 AS 3의 고객과 AS 3으로부터 중계 라우트를 수신하는 다른 사용자들에
   대해 AS 3을 통한 AS 1 방향으로의 예상치 못한 트래픽 이동을 유발할 수
   있습니다. proxy aggregation은 집계된 라우트의 소스나 집계를 제공하는
   당사자와 관계가 없는 인터넷 부분에 예상치 못한 결과를 초래할 수 있으므로,
   극도의 주의를 기울여 사용해야 합니다.

   집계로 결합할 라우트의 구성은 라우팅 정책의 구현이며 일부 수동으로
   유지 관리되는 정보를 필요로 합니다. 라우팅 가능한 프리픽스 집합에 대해
   유지 관리되어야 하는 정보에 대한 추가로서, 집계 구성은 일반적으로
   집계할 IPv4 주소 블록의 범위를 정의하는 한두 줄에 불과합니다. 자체
   집계를 수행하는 사이트는 자신에게 할당된 주소 블록에 대해 그렇게
   하는 것입니다; 다른 사이트를 대신하여 집계를 수행하는 사이트는 집계를
   위임하기로 한 합의 때문에 이 정보를 알고 있습니다. 네트워크 관리자의
   최선의 현행 관행이 서로로부터 수용할 프리픽스 목록을 교환하는 것이라고
   가정하면, 집계 정보의 구성은 상당한 추가 관리 오버헤드를 도입하지
   않습니다.

   집계 라우트의 생성은 일반적으로 정적으로 또는 집계 라우트 내에 포함된
   프리픽스에 대한 활성 동적 라우트를 학습하는 것에 대한 응답으로
   지정됩니다. 이러한 동적 집계 라우트 광고가 수행되는 경우, 라우트가
   과도하게 추가되거나 철회되지 않도록 주의해야 합니다("route flapping"이라
   알려진 현상). 일반적으로, 동적 집계 라우트 광고는 집계의 적어도 하나의
   구성 요소에 도달할 수 있게 될 때 추가되고 모든 구성 요소에 도달할 수
   없게 될 때만 철회됩니다. 적절하게 구성된 집계 라우트는 비집계 라우트보다
   더 안정적이며 따라서 글로벌 라우팅 안정성을 개선합니다.

   구현 참고: "Class D" (멀티캐스트) 주소 공간의 집계는 이 문서의
   범위를 벗어납니다.

5.5.  라우트 전파 및 라우팅 프로토콜 고려사항

   CIDR의 원래 배포 이전에, 일반적인 관행은 외부 라우팅 프로토콜(즉,
   EGP 또는 BGP)을 통해 학습한 라우트를 사이트의 내부 라우팅 프로토콜
   (일반적으로 OSPF, IS-IS 또는 RIP)을 통해 전파하는 것이었습니다.
   이는 해당 프로토콜을 통해 학습한 목적지로 보낼 트래픽에 대해 일관성
   있고 올바른 출구 지점이 선택되도록 하기 위해 수행되었습니다. 네 가지
   진화적 효과 -- CIDR의 출현, 글로벌 라우팅 상태의 폭발적 성장, BGP4의
   광범위한 채택, 그리고 전체 경로 정보를 전파해야 하는 요구사항 --가
   결합되어 그 관행을 폐기시켰습니다. 적절한 경로 전파를 보장하고 AS 간
   라우팅 불일치를 방지하기 위해(BGP4의 루프 감지/방지 메커니즘은 전체
   경로 전파를 필요로 함), 중계 네트워크는 다른 제공자로부터 학습한
   라우트를 네트워크 내부와 네트워크를 통해 전달하기 위해 internal BGP
   (iBGP)를 사용해야 합니다.

6.  새로운 주소 할당 및 라우팅의 예

6.1.  주소 위임

   단일 네트워크 제공자 "PA"에 할당된, 10.24.0.0으로 시작하여
   10.31.255.255로 끝나는 524288(2^19)개 주소의 블록을 고려하십시오.
   이는 2048개의 레거시 "Class C" 네트워크 번호(또는 /24)의 블록과 동등한
   크기입니다. 이 블록에 대한 classless 라우트는 255.248.0.0의 마스크를
   가진 10.24.0.0 및 프리픽스 10.24.0.0/13으로 설명됩니다.

   이 서비스 제공자가 다음 순서로 6개의 사이트를 연결한다고 가정합니다
   (서비스 제공자의 주소 공간에서 일시적인 "구멍"이 어떻게 형성될 수
   있는지를 보여주기 때문에 순서가 중요합니다):

   o  "C1", 2048개 미만의 주소가 필요 (/21 또는 8 x /24)

   o  "C2", 4096개 미만의 주소가 필요 (/20 또는 16 x /24)

   o  "C3", 1024개 미만의 주소가 필요 (/22 또는 4 x /24)

   o  "C4", 1024개 미만의 주소가 필요 (/22 또는 4 x /24)

   o  "C5", 512개 미만의 주소가 필요 (/23 또는 2 x /24)

   o  "C6", 512개 미만의 주소가 필요 (/23 또는 2 x /24)

   모든 경우에, 각 사이트에서 "필요한" IPv4 주소의 수는 상당한 성장을
   허용하는 것으로 가정합니다. 서비스 제공자는 주소 공간을 다음과 같이
   위임합니다:

   o  C1. 10.24.0부터 10.24.7까지 배정. 이 네트워크 블록은 라우트
      10.24.0.0/21 (마스크 255.255.248.0)로 설명됩니다.

   o  C2. 10.24.16부터 10.24.31까지 배정. 이 블록은 라우트
      10.24.16.0/20 (마스크 255.255.240.0)으로 설명됩니다.

   o  C3. 10.24.8부터 10.24.11까지 배정. 이 블록은 라우트
      10.24.8.0/22 (마스크 255.255.252.0)로 설명됩니다.

   o  C4. 10.24.12부터 10.24.15까지 배정. 이 블록은 라우트
      10.24.12.0/22 (마스크 255.255.252.0)로 설명됩니다.

   o  C5. 10.24.32와 10.24.33 배정. 이 블록은 라우트
      10.24.32.0/23 (마스크 255.255.254.0)으로 설명됩니다.

   o  C6. 10.24.34와 10.24.35 배정. 이 블록은 라우트
      10.24.34.0/23 (마스크 255.255.254.0)으로 설명됩니다.

   이 6개의 사이트는 제공자의 IGP 내에서 다양한 크기의 6개 프리픽스로
   표현되어야 합니다. 어떤 이유로 제공자가 classless 라우팅이나
   가변 길이 서브넷을 지원하지 않는 구식 IGP를 사용하는 경우, 모든
   /24에 대한 명시적 라우트가 전달되어야 합니다.

   이 예를 더 현실적으로 만들기 위해, C4와 C5가 다른 서비스 제공자
   "PB"를 통해 멀티홈되어 있다고 가정합니다. 또한 원래 "RB"에 연결되어
   있었지만 "PA"로 이전한 사이트 "C7"이 존재한다고 가정합니다. 이
   이유로, C7은 PB의 (다음) 2048 x /24 블록에서 할당된 네트워크 번호
   블록을 가지고 있습니다.

   o  C7. 10.32.0부터 10.32.15까지 배정. 이 블록은 라우트
      10.32.0.0/20 (마스크 255.255.240.0)으로 설명됩니다.

   멀티홈 사이트의 경우, C4는 "RA"를 통해 1차로, "RB"를 통해 2차로
   광고된다고 가정합니다; 그리고 C5는 "RB"를 통해 1차로, "RA"를 통해
   2차로 광고됩니다. 또한 "RA"와 "RB"가 모두 동일한 중계 서비스 제공자
   "BB"에 연결되어 있다고 가정합니다.

   그래픽으로, 이 토폴로지는 다음과 같습니다:

   10.24.0.0 -- 10.24.7.0__         __10.32.0.0 - 10.32.15.0
   C1: 10.24.0.0/21        \       /  C7: 10.32.0.0/20
                            \     /
                             +----+                              +----+
   10.24.16.0 - 10.24.31.0_  |    |                              |    |
   C2: 10.24.16.0/20       \ |    |  _10.24.12.0 - 10.24.15.0__  |    |
                            \|    | / C4: 10.24.12.0/20        \ |    |
                             |    |/                            \|    |
   10.24.8.0 - 10.24.11.0___/| PA |\                             | PB |
   C3: 10.24.8.0/22          |    | \__10.24.32.0 - 10.24.33.0___|    |
                             |    |    C5: 10.24.32.0/23         |    |
                             |    |                              |    |
   10.24.34.0 - 10.24.35.0__/|    |                              |    |
   C6: 10.24.34.0/23         |    |                              |    |
                             +----+                              +----+
                               ||                                  ||
   routing advertisements:     ||                                  ||
                               ||                                  ||
           10.24.12.0/22 (C4)  ||              10.24.12.0/22 (C4)  ||
           10.32.0.0/20 (C7)   ||              10.24.32.0/23 (C5)  ||
           10.24.0.0/13 (PA)   ||              10.32.0.0/13 (PB)   ||
                               ||                                  ||
                               VV                                  VV
                            +---------- BACKBONE NETWORK BB ----------+

6.2.  라우팅 광고

   규칙 #1을 따르기 위해, PA는 할당받은 주소 블록과 C7을 광고해야
   합니다. C4는 멀티홈이며 PA를 통해 1차이므로, 역시 광고되어야
   합니다. C5는 멀티홈이며 PB를 통해 1차입니다. 원칙적으로(그리고
   위의 예에서), PB에 의한 최장 매칭이 자동으로 PB를 1차로 선택하고
   PA의 집계 광고가 2차로 사용되므로 광고할 필요가 없습니다. 실제
   관행에서, C5는 일반적으로 두 제공자 모두를 통해 광고됩니다.

   "PA"에서 "BB"로의 광고는 다음과 같습니다:

      10.24.12.0/22 primary    (C4를 광고)
      10.32.0.0/20 primary     (C7을 광고)
      10.24.0.0/13 primary     (PA의 나머지를 광고)

   PB의 경우, 광고에는 C4와 C5, 그리고 자신의 주소 블록도 포함되어야
   합니다.

   "PB"에서 "BB"로의 광고는 다음과 같습니다:

      10.24.12.0/22 secondary  (C4를 광고)
      10.24.32.0/23 primary    (C5를 광고)
      10.32.0.0/13 primary     (RB의 나머지를 광고)

   섹션 5.1에서 언급된 문제 진단 이슈를 설명하기 위해, PA가 C7(PB의
   공간에서 할당된 사이트)에 대한 연결을 잃는 경우 어떻게 되는지
   고려하십시오. 상태 기반 프로토콜에서 PA는 BB에 10.32.0.0/20이
   도달 불가능하게 되었다고 알릴 것입니다. 이제 BB가 이 정보를 라우팅
   테이블에서 플러시하면, 이 목적지를 위해 BB를 통해 전송되는 향후
   트래픽은 PB의 덜 구체적인 매칭인 10.32.0.0/13에 의해 PB로
   포워딩됩니다(규칙 #2에 따라 폐기됨). 이는 운영상의 문제를
   일으키지 않지만(C7은 어떤 경우에도 도달 불가능함), "BB"를 가로지르는
   추가 트래픽을 생성하며("traceroute"로 장애를 디버깅하려는 사람에게
   혼란을 줄 수도 있습니다). 이러한 도달 불가능 상태를 캐시하는
   메커니즘이 좋겠지만, 이는 이 문서의 범위를 벗어납니다.

7.  Domain Name Service 고려사항

   CIDR로의 이전에 의해 눈에 띄게 영향을 받은 인터넷 서비스의 한 가지
   측면은 주소에서 이름으로의 변환에 사용되는 메커니즘인 도메인 시스템의
   IN-ADDR.ARPA 영역이었습니다. 이 영역은 옥텟 경계에서만 위임되므로,
   비트마스크 지향 주소 지정을 사용하는 주소 할당 계획으로의 이전은 이
   IN-ADDR.ARPA 영역의 일부를 유지 관리하는 사람들에게 다소 증가된 작업을
   야기했습니다.

   옥텟 경계에 정렬되지 않는 주소 블록을 사용할 때 IN-ADDR.ARPA 영역을
   채우는 기술에 대한 설명은 [RFC2317]에 설명되어 있습니다.

8.  장기 해결책으로의 전환

   CIDR은 IPv4 인터넷의 라우팅 상태 및 주소 고갈 문제에 대한 단기적
   해결책으로 설계되었습니다. 이것은 근본적인 인터넷 라우팅이나 주소 지정
   아키텍처를 변경하지 않습니다. 아마도 그러한 해결책의 개발 긴급성을
   지연시키는 것을 제외하고는, 더 장기적인 해결책으로의 전환 계획에 영향을
   미칠 것으로 예상되지 않습니다.

9.  CIDR이 글로벌 라우팅 상태에 미친 영향 분석

   CIDR이 1990년대 초에 처음 제안되었을 때, 원래 저자들은 글로벌 라우팅
   상태의 성장률에 대한 관찰을 하고 CIDR 배포가 기하급수적으로 보이는
   성장을 더 지속 가능한 비율로 줄이기를 바라며 예측을 제시했습니다.
   그 배포 이후, "The CIDR Report" [CRPT]라고 불리는 지속적인 노력이
   그 성장률을 정량화하고 추적하려고 시도해 왔습니다. 다음은 2005년
   3월 기준 CIDR 보고서의 간략한 요약과 함께, 1988년에 글로벌 라우팅
   상태의 크기 측정이 시작된 이래 발생한 다양한 패턴과 성장률 변화를
   설명하려는 시도입니다.

   "Active BGP Table Entries" [CBGP]의 그래프를 살펴보면, 정책과
   관행의 변화를 반영하는 뚜렷한 변곡점을 가진 여러 다른 성장 추세가
   있는 것으로 보입니다. 추세와 이를 유발한 것으로 믿어지는 이벤트는
   다음과 같습니다:

   1.  그래프의 맨 왼쪽에서의 기하급수적 성장. 이는 1980년대 후반부터
       약 1994년까지 이전 연구 네트워크의 초기 확장 및 상용화 기간을
       나타냅니다. 이 성장의 주요 동인은 중계 제공자를 위한 집계 기능의
       부재와 종단 사이트에 대한 레거시 Class C 할당의 광범위한 사용이었습니다.
       새로운 사이트가 글로벌 인터넷에 연결될 때마다, 하나 이상의 새로운
       라우팅 항목이 생성되었습니다.

   2.  CIDR "supernet" 블록이 NIC에 의해 처음 할당되고 서비스 제공자에
       의해 별도의 레거시 class-C 네트워크로 라우팅되면서 1993년 말과
       1994년 초에 기하급수적 추세가 가속화됨.

   3.  제공자에 의한 BGP4 배포가 "supernet" 블록의 집계를 가능하게 하면서
       1994년에 급격한 감소. 라우팅 테이블 항목 수의 가장 큰 감소 기간은
       일반적으로 IETF CIDR Deployment Working Group의 각 회의 이후 몇
       주에 해당한다는 점에 유의하십시오.

   4.  CIDR 기반 주소 할당이 이루어지고 집계된 라우트가 네트워크 전체에
       추가되면서 1994년 중반부터 1999년 초까지 대략 선형적 성장.

   5.  "하이테크 버블"이 인터넷의 급속한 확장과 멀티호밍 및 트래픽
       엔지니어링을 위한 더 구체적인 라우트 광고의 큰 증가를 모두
       촉진하면서 1999년 초부터 2001년까지 새로운 기하급수적 성장 기간.

   6.  많은 조직이 운영을 중단하게 한 "닷컴 붕괴"와 집계 효율성 개선을
       목표로 한 "CIDR police" [CPOL] 작업의 조합으로 인해 2001년을
       통한 성장 둔화.

   7.  2002년과 2003년을 통한 대략 선형적 성장. 이는 "버블" 이전에
       관찰된 "정상" 성장률의 재개와 "CIDR Police" 노력의 종료를
       나타내는 것으로 보입니다.

   8.  2004년부터 시작된 보다 최근의 기하급수적 성장 추세. 가장 좋은
       설명은 인터넷의 증가된 확장을 추진하는 글로벌 경제의 개선과
       이전에 새로운 제공자들이 집계 효율성을 개선하도록 교육하는
       도구로 사용되었던 "CIDR Police" 노력의 지속적인 부재인 것으로
       보입니다. 서비스 제공자들이 상충하는 라우트 광고로 인한 보안
       문제를 완화하기 위해 의도적으로 프리픽스를 분해(de-aggregate)한
       경우도 있었습니다(섹션 12 참조). 이러한 행동은 해당 제공자가
       겪는 단기적 문제를 해결할 수 있지만, 근본적으로 확장 불가능하며
       전체 커뮤니티에 상당히 해롭습니다. 또한, 아마도 권장 라우팅
       구성에 대한 일관된 최신 정보의 부족으로 인해, 할당된 프리픽스와
       그 모든 /24 구성 요소를 모두 광고하는 많은 제공자들이 있는
       것으로 보입니다.

10.  결론 및 권고사항

   1992년에 CIDR이 처음 개발되었을 때, 인터넷의 지속적인 성장에 대해
   심각한 문제가 있었습니다. 라우팅 상태 복잡성의 성장과 주소 공간
   소비의 급격한 증가로 인해 하나 또는 두 문제 모두가 몇 년 이내에
   인터넷의 지속적인 성장을 배제할 것으로 보였습니다.

   classless 프리픽스 라우트를 전달하는 BGP4의 지원과 결합한 CIDR의
   배포는 단기적 위기를 완화했습니다. 이는 장비 제조업체와 제공자
   커뮤니티 모두의 공동 노력을 통해서만 달성되었습니다. 프리픽스 광고에
   대해 네트워크에 요금을 부과하겠다는 위협(그리고 아마도 일부 경우
   실제 구현)은 주소 공간을 공유하고 따라서 서비스 제공자에게 라우트를
   광고하는 관련 비용을 공유하기 위한 추가 인센티브를 제공했을 수
   있습니다.

   IPv4 라우팅 시스템 아키텍처는 집계 주소 광고와 트래픽 엔지니어링,
   멀티호밍 및 로컬 구성과 관련된 더 구체적인 광고의 모음을 기반으로
   토폴로지 정보를 전달합니다. 2005년 3월 기준, 라우팅 시스템의 기본
   집계 주소 부하는 약 75,000개의 항목을 가지고 있습니다. 약 85,000개의
   추가 항목은 이 기본 "root" 모음의 더 구체적인 항목입니다. 이러한
   추가 항목 중 다수가 지역적 또는 심지어 로컬 범위의 문제를 해결하기
   위해 존재하며 전 세계적으로 전파될 필요가 없다고 믿을 이유가 있습니다.

   질문해야 할 분명한 질문은 CIDR이 글로벌 라우팅 상태 성장과 주소 공간
   고갈을 지속 가능한 비율로 유지하는 데 계속 실현 가능한 접근 방식이
   될 수 있는지입니다. 최근 측정은 기하급수적 성장이 재개되었음을
   나타내지만, 추가 분석은 서비스 제공자에게 효율적인 집계 전략과 적절한
   장비 구성에 대해 보다 적극적으로 교육하는 노력으로 이 추세를 완화할
   수 있음을 시사합니다. 더 앞을 내다보면, 각 사이트에 대한 글로벌
   라우팅 상태를 필요로 하지 않는 더 나은 멀티호밍 기술과 더 많은 상태를
   추가하지 않고도 트래픽 부하 분산을 수행하는 방법에 대한 명확한 필요가
   있습니다. 이러한 발전 없이 그리고 주요 아키텍처 변경이 없는 경우,
   집계는 글로벌 인터넷에서 라우팅을 확장 가능하게 만드는 유일한 도구입니다.

11.  CIDR 문서의 상태 업데이트

   이 메모는 다음의 CIDR 사용 및 배포를 설명하는 RFC를 폐기하고
   Historic로 재분류를 요청합니다:

   o  RFC 1467: 인터넷에서의 CIDR 배포 상태

      이 Informational RFC는 1993년의 CIDR 배포 상태를 설명했습니다.
      2005년 현재, CIDR은 철저히 배포되었으므로, 이 상태 노트는 역사적
      데이터 포인트만을 제공합니다.

   o  RFC 1481: 확장 문제를 해결하기 위한 중간 전략에 대한 IAB 권고

      이 매우 짧은 Informational RFC는 확장 문제를 해결하기 위한 CIDR
      사용에 대한 IAB의 지지를 설명했습니다. RFC 1481의 목표가
      달성되었으므로, 이제 역사적 가치만 있습니다.

   o  RFC 1482: NSFNET 정책 기반 라우팅 데이터베이스에서의 집계 지원

      이 Informational RFC는 CIDR에 의해 명시된 라우트 집계에 대한
      NSFNET의 지원 계획을 설명합니다. NSFNET은 오래전에 존재를 중단했고
      CIDR은 보편적으로 배포되었으므로, RFC 1482는 이제 역사적 관련성만
      가집니다.

   o  RFC 1517: Classless Inter-Domain Routing(CIDR) 구현의 적용 가능성
      성명

      이 Standards Track RFC는 CIDR이 필수(required)로 예상되는 곳과
      (강력히) 권장(recommended)되는 곳을 설명했습니다. 인터넷에서의
      CIDR의 완전한 배포로, CIDR이 필수가 아닌 상황은 역사적 관심만
      있습니다.

   o  RFC 1518: CIDR을 통한 IP 주소 할당 아키텍처

      이 Standards Track RFC는 라우팅 및 주소 집계 고려사항을 상당히
      논의했습니다. 이러한 문제 중 일부는 이 문서의 섹션 3.1에
      요약되어 있습니다. 주소 할당 정책 및 절차가 이제 주로 RIR에
      있으므로, Standards Track RFC에서 그러한 관행을 문서화하려고
      시도하는 것은 적절하지 않습니다. 또한, [RFC3221]도 라우팅 시스템의
      관점에서 동일한 문제 중 많은 것을 설명합니다.

   o  RFC 1520: CIDR 환경에서 제공자 경계를 넘어 라우팅 정보 교환

      이 Informational RFC는 제공자 간 라우트 정보 교환을 위해 CIDR이
      완전히 지원되지 않는 전환 시나리오를 설명했습니다. 인터넷에서의
      CIDR의 완전한 배포로, 그러한 시나리오는 더 이상 운영적으로
      관련이 없습니다.

   o  RFC 1817: CIDR과 Classful 라우팅

      이 Informational RFC는 1995년의 CIDR 배포의 함의를 설명했습니다;
      이전에 classful이었던 주소가 CIDR 메커니즘을 사용하여 할당될
      것이며 비-CIDR 인식 사이트에 대한 기본 라우트의 사용을 설명합니다.
      인터넷에서의 CIDR의 완전한 배포로, 그러한 시나리오는 더 이상
      운영적으로 관련이 없습니다.

   o  RFC 1878: IPv4용 가변 길이 서브넷 표

      이 Informational RFC는 각 서브넷 크기에 대한 미리 계산된 서브넷
      마스크 및 주소 수의 표를 제공했습니다. 이 문서(섹션 3.1 참조)에
      유사한 표가 포함됨에 따라, 별도의 RFC에서 이를 문서화할 필요가
      더 이상 없습니다.

   o  RFC 2036: 인터넷 내 Class A 주소 공간의 구성 요소 사용에 대한
      관찰

      이 Informational RFC는 이전에 classful이었던 주소 공간에서
      classless 프리픽스를 할당하는 것과 관련된 여러 운영 문제를
      설명했습니다. 인터넷에서의 CIDR의 완전한 배포와 역사적
      "Class A" 주소 공간에서 classless 프리픽스 할당을 한 반 년
      이상의 경험으로, 이 RFC는 이제 역사적 가치만 있습니다.

12.  보안 고려사항

   classless 프리픽스를 지원하는 라우팅 프로토콜의 도입과 더 구체적인
   (최장 매칭) 라우트가 덜 구체적인 프리픽스에 대한 라우트와 겹칠 때
   우선되어야 하는 포워딩 모델로의 이전은 최소한 두 가지 보안 우려를
   도입합니다:

   1.  해당 목적지에 대해 일반적으로 광고되는 집계보다 더 구체적인
       주어진 목적지에 대한 프리픽스를 광고함으로써 트래픽을 가로챌 수
       있습니다. 예를 들어, 주소가 192.168.17.100인 인기 있는 종단
       시스템이 192.168.16.0/20을 광고하는 서비스 제공자에 연결되어
       있다고 가정합니다. 이 사이트에 대한 트래픽을 가로채는 데 관심이
       있는 악의적인 네트워크 운영자는 글로벌 라우팅 시스템에
       192.168.17.0/24를 광고하거나 최소한 광고를 시도할 수 있습니다.
       이 프리픽스가 "정상" 프리픽스보다 더 구체적이기 때문에, 트래픽은
       합법적인 종단 시스템에서 벗어나 악의적인 운영자가 소유한
       네트워크로 전환됩니다. CIDR 이전에는, 네트워크의 일부에서 특정
       네트워크 번호와 정확히 일치하는 거짓 광고를 따르도록 트래픽을
       유도하는 것이 가능했습니다; CIDR은 최장 매칭 라우팅이 일반적으로
       모든 트래픽이 덜 구체적인 라우트보다 더 구체적인 라우트를
       선호하게 하므로 이 문제를 다소 악화시킵니다. 그러나 CIDR 기반
       공격에 대한 대응책은 CIDR 이전 공격에 대한 것과 동일합니다:
       제공자 간 신뢰 관계의 수립과 제공자 경계에서의 강력한 라우트
       정책 필터의 결합. 불행히도, 이러한 필터의 구현은 고도로 분산된
       인터넷에서 어렵습니다. 해결 방법으로, 많은 제공자들은 할당하는
       블록 크기에 대한 RIR 가이드라인에서 파생된, 다른 제공자로부터
       수용하는 프리픽스 길이에 대한 상한을 설정하는 일반적인 필터를
       구현합니다. "스패머"들이 생성하는 트래픽("스팸" 이메일 메시지)의
       출처를 숨기기 위해 주소 공간을 일시적으로 가로채기 위해 이런
       종류의 공격을 사용하는 것이 관찰되었다는 점에 유의하십시오.

   2.  대규모 라우트를 시스템에 광고함으로써 인터넷 인프라의 많은 부분에
       대한 서비스 거부 공격을 시작할 수 있습니다. 이러한 공격은 라우팅
       및 포워딩 테이블을 오버플로시켜 라우터 장애를 일으키는 것을
       목적으로 합니다. 이러한 종류의 장애를 일으킨 비악의적 사건의
       좋은 예는 악명 높은 "AS 7007" 이벤트 [7007]로, 운영자의 라우터
       잘못된 구성이 많은 수의 잘못된 라우트를 글로벌 라우팅 시스템을
       통해 전파되게 했습니다. 다시 말하지만, 이러한 종류의 공격은
       CIDR에서 실제로 새로운 것이 아닙니다; 레거시 Class A/B/C 라우트를
       사용하여 글로벌 라우팅 시스템에 최대 16843008개의 고유한 네트워크
       번호를 광고하는 것이 가능했으며, 이 숫자는 2005년에 만들어진 가장
       현대적인 라우팅 장비에도 문제를 일으키기에 충분합니다. 다른 점은
       CIDR 존재 하에서 라우터를 올바르게 구성하는 것의 적당한 복잡성이
       이러한 종류의 우발적 "공격"을 더 가능성 있게 만든다는 것입니다.
       이러한 종류의 공격을 방지하기 위한 조치는 위에서 설명한 가로채기에
       대한 것과 거의 동일하며, 경계 라우터가 이웃으로부터 수용할
       합리적인 최대 프리픽스 수를 구성하는 것이 최선의 현행 관행이라는
       것이 추가됩니다.

   이것은 CIDR이 더 쉽게 만드는 공격 종류에 대한 포괄적인 분석으로
   의도된 것이 아닙니다; 글로벌 라우팅 시스템의 보안 취약점에 대한
   보다 포괄적인 분석은 이 문서의 범위를 벗어납니다.

13.  감사의 말

   저자들은 RFC 1519의 다른 원래 저자들(Kannan Varadhan, Jessica Yu)에게;
   CIDR 뒤의 많은 아이디어가 영감을 받고 개발된 ROAD 그룹에게; 그리고
   이 문서의 재작성 버전의 초기 검토자들(Barry Greene, Danny McPherson,
   Dave Meyer, Eliot Lear, Bill Norton, Ted Seely, Philip Smith, Pekka
   Savola)에게 감사를 표하며, 이들의 의견, 수정 및 제안은 매우 소중했습니다.
   우리는 특히 Geoff Huston에게 의무를 훨씬 초과하는 기여에 대해 감사를
   표하고 싶습니다.

14.  참고문헌

14.1.  규범적 참고문헌

   [RFC791]   Postel, J., "Internet Protocol", STD 5, RFC 791,
              September 1981.

14.2.  참고적 참고문헌

   [7007]     "NANOG mailing list discussion of the "AS 7007"
              incident",
              <http://www.merit.edu/mail.archives/nanog/1997-04/
              msg00340.html>.

   [CBGP]     "Graph: Active BGP Table Entries, 1988 to Present",
              <http://bgp.potaroo.net/as4637/>.

   [CPOL]     "CIDR Police - Please Pull Over and Show Us Your BGP",
              <http://www.nanog.org/mtg-0302/cidr.html>.

   [CRPT]     "The CIDR Report", <http://www.cidr-report.org/>.

   [IANA]     "Internet Assigned Numbers Authority",
              <http://www.iana.org>.

   [LWRD]     "The Long and Winding Road",
              <http://rms46.vlsm.org/1/42.html>.

   [NRO]      "Number Resource Organization", <http://www.nro.net>.

   [RFC904]   Mills, D., "Exterior Gateway Protocol formal
              specification", RFC 904, April 1 1984.

   [RFC1058]  Hedrick, C., "Routing Information Protocol", RFC 1058,
              June 1988.

   [RFC1195]  Callon, R., "Use of OSI IS-IS for routing in TCP/IP and
              dual environments", RFC 1195, December 1990.

   [RFC1338]  Fuller, V., Li, T., Yu, J., and K. Varadhan,
              "Supernetting: an Address Assignment and Aggregation
              Strategy", RFC 1338, June 1992.

   [RFC1380]  Gross, P. and P. Almquist, "IESG Deliberations on
              Routing and Addressing", RFC 1380, November 1992.

   [RFC1518]  Rekhter, Y. and T. Li, "An Architecture for IP Address
              Allocation with CIDR", RFC 1518, September 1993.

   [RFC1519]  Fuller, V., Li, T., Yu, J., and K. Varadhan, "Classless
              Inter-Domain Routing (CIDR): an Address Assignment and
              Aggregation Strategy", RFC 1519, September 1993.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol", RFC
              2131, March 1997.

   [RFC2328]  Moy, J., "OSPF Version 2", STD 54, RFC 2328, April
              1998.

   [RFC2317]  Eidnes, H., de Groot, G., and P. Vixie, "Classless IN-
              ADDR.ARPA delegation", BCP 20, RFC 2317, March 1998.

   [RFC2453]  Malkin, G., "RIP Version 2", STD 56, RFC 2453, November
              1998.

   [RFC3021]  Retana, A., White, R., Fuller, V., and D. McPherson,
              "Using 31-Bit Prefixes on IPv4 Point-to-Point Links",
              RFC 3021, December 2000.

   [RFC3221]  Huston, G., "Commentary on Inter-Domain Routing in the
              Internet", RFC 3221, December 2001.

   [RFC4116]  Abley, J., Lindqvist, K., Davies, E., Black, B., and
              V. Gill, "IPv4 Multihoming Practices and Limitations",
              RFC 4116, July 2005.

   [RFC4271]  Rekhter, Y., Li, T., and S. Hares, "A Border Gateway
              Protocol 4 (BGP-4)", RFC 4271, January 2006.

   [RIPE]     "RIPE Network Coordination Centre",
              <http://www.ripe.net>.

저자 주소

   Vince Fuller
   170 W. Tasman Drive
   San Jose, CA  95134
   USA

   EMail: vaf@cisco.com


   Tony Li
   555 Del Rey Avenue
   Sunnyvale, CA 94085

   Email: tli@tropos.com

전체 저작권 성명

   Copyright (C) The Internet Society (2006).

   이 문서는 BCP 78에 포함된 권리, 라이선스 및 제한에 따르며, 그에
   명시된 경우를 제외하고 저자는 모든 권리를 보유합니다.

   이 문서와 여기에 포함된 정보는 "있는 그대로" 제공되며 기여자,
   그/그녀가 대표하거나 후원하는 조직(있는 경우), THE INTERNET SOCIETY
   및 THE INTERNET ENGINEERING TASK FORCE는 여기의 정보 사용이 어떤
   권리도 침해하지 않을 것이라는 보증이나 상품성 또는 특정 목적에의
   적합성에 대한 묵시적 보증을 포함하되 이에 국한되지 않는 모든 명시적
   또는 묵시적 보증을 부인합니다.

지적 재산

   IETF는 이 문서에 설명된 기술의 구현 또는 사용과 관련하여 주장될 수
   있는 지적 재산권 또는 기타 권리의 유효성이나 범위, 또는 그러한 권리에
   따른 라이선스가 이용 가능하거나 이용 가능하지 않을 수 있는 범위에
   대해 어떠한 입장도 취하지 않습니다; 또한 그러한 권리를 식별하기 위해
   독립적인 노력을 했다는 것을 나타내지도 않습니다. RFC 문서의 권리에
   관한 절차에 대한 정보는 BCP 78 및 BCP 79에서 찾을 수 있습니다.

   IETF 사무국에 대한 IPR 공개 사본과 이용 가능하게 될 라이선스에 대한
   보증, 또는 이 사양의 구현자나 사용자가 그러한 독점적 권리의 사용에
   대한 일반 라이선스 또는 허가를 얻으려는 시도의 결과는 IETF 온라인
   IPR 저장소 http://www.ietf.org/ipr에서 얻을 수 있습니다.

   IETF는 이 표준을 구현하는 데 필요할 수 있는 기술에 적용될 수 있는
   저작권, 특허 또는 특허 출원, 또는 기타 독점적 권리를 주의에 알려줄
   관심 있는 당사자를 초대합니다. 정보는 IETF의 ietf-ipr@ietf.org로
   보내주십시오.

감사의 말

   RFC Editor 기능에 대한 자금은 IETF Administrative Support Activity
   (IASA)에 의해 제공됩니다.
