# 모든 것은 JDBC 기초에 관한 것이다

> 원문: https://blog.jooq.org/it-is-all-about-the-jdbc-basics/

게시일: 2015년 9월 24일
저자: lukaseder (Marco Behler의 게스트 포스트)

---

## 소개

과거에 jOOQ에 대해 블로깅해온 Marco Behler의 게스트 포스트를 발표하게 되어 매우 기쁩니다.

Marco는 프로그래밍(실제로는 리버스 엔지니어링)으로 시작했으며 현재는 일상 업무에서 주로 JVM 위에서 프로그래밍하고 있습니다. 그는 또한 항상 전략과 마케팅에 대한 관심을 가지고 있었습니다. Marco Behler GmbH는 그러한 하이브리드 역할의 결과물입니다.

---

## 모든 것은 JDBC 기초에 관한 것이다

그런 날들 중 하나입니다.

Spring 문서의 `@Transactional` 섹션을 읽고 있지만 여전히 논리적 트랜잭션 범위와 물리적 트랜잭션 범위의 차이점을 이해하지 못합니다. 동시에 앱에서 `LazyInitializationException`이 발생하는데 왜 그런지 전혀 모릅니다. 설상가상으로 프로덕션에서 갑작스러운 데이터베이스 데드락이 발생하고 커넥션 풀에서 어떻게든 커넥션이 누수되고 있다고 의심하게 됩니다.

벽에 머리를 박는 대신 무엇이 도움이 됐을지 아십니까? 말 그대로 몇 시간만 JDBC 기초를 배우는 데 투자하는 것입니다. 그 이유를 알아봅시다:

---

## JDBC 기초란 무엇인가?

기초란 데이터베이스 커넥션을 열고 닫는 것, 그리고 트랜잭션을 다루는 것입니다. 또한 데드락, 비관적 잠금과 낙관적 잠금이 순수 JDBC 레벨에서 어떻게 작동하는지 이해하는 것입니다. 약간의 격리 수준과 세이브포인트, 그리고 바로 커넥션 풀과 JDBC 드라이버 로깅으로 넘어갑니다. 그게 전부입니다. 정말로요.

---

## 왜 기초가 그렇게 중요한가?

Spring, Hibernate, jOOQ 등과 같은 프레임워크에서 마주치는 _모든 것_이 이러한 기초 위에 구축됩니다. 예를 들어, 인터넷에는 Hibernate의 `LazyInitializationException`에 관한 수많은 주제가 있고 저도 수년 전에 그 특정 예외가 두려웠습니다. 하지만 데이터베이스에 대한 커넥션이 열려 있지 않은 상태에서 데이터베이스에 쿼리를 시도하면(기본적으로 이 예외의 전부입니다) 다른 무엇을 기대하겠습니까?

Spring의 "트랜잭션 프레임워크"도 마찬가지입니다. 프로그래밍 방식으로든, 어노테이션으로든, XML로든 Spring에서 트랜잭션을 여는 방법에 대해 너무나 많은 콘텐츠, 또는 FUD(Fear/Uncertainty/Doubt - 공포/불확실성/의심)가 있습니다. 하지만 내부적으로 JDBC 세계에서 트랜잭션을 여는 방법은 단 하나(그리고 실제로 한 줄의 코드)뿐이라는 것을 알고 있다면 어떨까요?

프로덕션 환경에서 볼 수 있는 커넥션 풀의 다양한 (잘못된)설정에 대해서는 시작조차 하지 않겠습니다. 또는 JDBC (드라이버) 로깅에 대한 인식 부족으로 인해 실제 환경에서 디버깅을 하게 되는 경우도 마찬가지입니다. 모두 기초이며, 몇 시간 안에 마스터할 수 있고 평생 도움이 될 것입니다!

---

## 왜 사람들은 그냥 기초를 배우지 않는가?

모든 중간 규모 프로젝트에는 수많은 기술이 관련되어 있으며 보통 그것들을 모두 배우거나 어떻게 함께 작동하는지에 대한 명확한 경로가 없습니다. 모든 것을 파헤치는 데는 단순히 많은 시간과 노력이 필요합니다.

JPA 세션과 JDBC 커넥션이 있고, 그러면 Spring이 어떻게든 5가지 다른 방식으로 트랜잭션 프록시를 제공하고, 다른 동료가 방금 jOOQ를 믹스에 추가했는데, 어떻게든 세션이 플러시되지 않고 객체가 영속화되지 않으며 HibernateTransactionManager가 예상대로 작동하지 않습니다.

이 모든 것과 함께, 저도 데이터베이스 트랜잭션이 그냥 커밋되기를 바랍니다 – 롤백에서 무슨 일이 일어날지는 감히 상상도 안 됩니다 :)

하지만 결국, 언급된 모든 기술은 단지 JDBC _위에_ 있는 레이어일 뿐입니다. 트랜잭션이나 데드락이나 세이브포인트를 기본 레벨에서 이해한다면, Spring이나 Hibernate나 jOOQ가 여러분을 당황하게 하지 않을 것입니다.

---

## 그래서 무엇을 추천하시나요?

일상적인 데이터베이스 프로그래밍에서 훨씬 앞서 나가고 싶다면, 기초부터 시작해야 합니다. 단계별로요. 그러면 대부분의 문제가 자동으로 사라지는 것을 보게 될 것입니다.

저의 광범위한 데이터베이스 프로그래밍 경험을 바탕으로, 실행 준비가 된 수많은 연습 문제가 포함된 전자책을 만들었습니다. 이 책은 여러분을 Java 데이터베이스 초보자에서 전문가로 안내할 것입니다. 여러분만의 속도로요. 각 챕터의 소스 코드를 IDE에 복사하고 실행하고 (바라건대) 배울 수 있습니다. 이 책은 순수 JDBC, Spring, Hibernate, jOOQ(곧 추가 예정), 그리고 분산 트랜잭션도 다룹니다.

여기에서 온라인으로 전체 책을 무료로 읽을 수 있으며, 여러분의 피드백을 받고 싶습니다! 커뮤니티 피드백을 책의 향후 판에 반영하고 싶습니다. 또한, 마음에 드시고 연습 문제가 도움이 된다면 유료 디지털 버전(pdf, epub, mobi)을 구매하여 지원을 보여주실 수도 있습니다.

---

## 어떤 경우든…

…JDBC 기초를 배우세요 – 그러면 평생 도움이 될 것입니다!
