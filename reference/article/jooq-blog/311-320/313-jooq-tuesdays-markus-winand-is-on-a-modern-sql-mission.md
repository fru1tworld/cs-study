# jOOQ 화요일: Markus Winand가 모던 SQL 미션을 수행 중이다

> 원문: https://blog.jooq.org/jooq-tuesdays-markus-winand-is-on-a-modern-sql-mission/

jOOQ 화요일 시리즈에 오신 것을 환영합니다. 이 시리즈에서는 격월로 셋째 주 화요일마다 jOOQ 관점에서 우리 업계에서 흥미롭다고 생각되는 분들을 인터뷰한 글을 게시합니다. 여기에는 SQL, Java, 오픈 소스 및 다양한 관련 주제를 다루는 분들이 포함됩니다.

여섯 번째 에디션에서는 Markus Winand와 이야기를 나눌 수 있어 기쁩니다. Markus는 인기 있는 책 SQL Performance Explained와 더욱 유명한 웹사이트 Use The Index, Luke의 저자이며, 그가 또 다른 대단한 프로젝트를 진행하고 있다는 소식에 매우 기대됩니다.

---

## 질문 1: 모던 SQL 웹사이트 출시

안녕하세요 Markus – 최근에 modern-sql.com을 출시하셨습니다. 이 웹사이트의 목표는 무엇인가요?

modern-sql.com의 목표는 학교나 대학에서 배우지 않은 SQL의 좋은 기능들에 대한 교과서이자 참고 자료를 만드는 것입니다. 흥미롭게도 이러한 기능들에 대한 온라인 매뉴얼은 꽤 부족합니다. 두 가지 형태로 존재하는데요: 블로그 포스트와 벤더 문서입니다. 블로그 포스트는 보통 특정 기능이나 사용 사례를 다루는 일회성 이벤트입니다. jOOQ 블로그를 포함해 많은 훌륭한 블로그가 있지만, 최신 SQL 기능을 모두 배우기 위해 추천할 만한 곳은 없습니다. 반면에 벤더 문서는 대부분 문법에 대한 참조 자료일 뿐이며, 꽤 자주 좋지 않은 것들이 있습니다: 표준 준수에 대해 전혀 언급하지 않는 경우가 많고 "독점 기능 우선" 접근 방식을 따르는 경향이 있습니다.

그 결과 SQL 시장은 매우 분열되어 있습니다: SQL-92 외에는 모든 데이터베이스에 공통인 명확한 기반이 없습니다. 이는 취업 시장에서 특히 뚜렷하게 나타납니다: 채용 공고는 단순히 SQL을 요구하거나(이는 오래된 관계형 SQL을 의미함) 특정 제품 경험을 요구합니다. 이것이 요즘 거의 표준이며 아무도 의문을 제기하지 않습니다. 하지만 이런 채용 공고에 대해 어떻게 생각하시겠습니까: "Google Chrome 웹 개발자." 웹 개발자는 클라이언트의 브라우저를 선택할 수 없습니다. 많은 사람들이 시도했지만 실패했죠. "XYZ에 최적화"를 기억하시나요? 그래서 웹 개발자들은 지난 수십 년간 브라우저에 표준 준수를 요구해 왔습니다. 방금 새 웹사이트를 출시한 입장에서 말씀드리면, CSS 준수는 지난 5년간 극적으로 개선되었습니다. 궁극적으로 저는 SQL에서도 같은 일이 일어나길 바랍니다. modern-sql.com이 표준 준수 SQL에 대한 관심을 불러일으켜 개발자들도 데이터베이스 벤더에게 표준 준수를 요구하기 시작하길 바랍니다. 꽤 야심찬 목표이죠.

---

## 질문 2: SQL OFFSET 절에 대한 전쟁

작년에 SQL OFFSET 절에 대한 전쟁에 나서셨습니다. 그 캠페인의 배경에 대해 설명해 주시겠어요?

OFFSET의 가장 큰 문제는 일반적으로 잘못된 사용 사례인 페이지네이션에 사용된다는 것입니다. 이 경우 OFFSET은 이전에 선택한 행 다음의 행을 찾으려는 의도로 특정 수의 행을 건너뛰는 데 사용됩니다. 그러나 OFFSET은 정의상 이전에 선택한 행 다음의 행을 반환하는 것이 아니라 결과의 처음 N개 행을 버리는 것입니다. 우연히도 OFFSET은 그동안 데이터가 변경되지 않았다면 예상한 결과를 제공합니다—이는 개발 중에는 꽤 흔한 경우입니다. 그러나 행이 추가되거나 삭제되면 고정된 수의 행을 버리는 것은 올바른 결과를 제공하지 않습니다. 올바른 접근 방식은 마지막으로 가져온 행을 기억하고 이 데이터를 WHERE 절에서 사용하여 다음 행을 선택하는 것입니다. 이 접근 방식은 http://use-the-index-luke.com/no-offset 에서 자세히 설명되어 있습니다.

OFFSET이 올바른 페이지네이션을 구현하는 데 사용될 수 없다는 사실 외에도, OFFSET은 성능에도 좋지 않습니다. OFFSET은 잘못되었고 느립니다. 더 무엇이 필요할까요? 사실 제가 아는 OFFSET의 유일하게 유효한 사용 사례는 SQL에서 SLEEP을 구현하는 것입니다—그게 필요한 적은 없지만요. 안타깝게도 OFFSET은 2011년에 SQL 표준에 포함되었습니다. 저는 이것이 최근 SQL 역사에서 가장 큰 실수라고 생각합니다. 왜냐하면 수정할 수 없기 때문입니다. 유일한 좋은 점은 이것이 선택적 기능이라는 것입니다—벤더들은 표준 준수를 위해 구현할 필요가 없습니다. 그럼에도 불구하고 Oracle과 Microsoft는 최근에 그들의 SQL 데이터베이스에 OFFSET을 추가했습니다.

---

## 질문 3: SQL Performance Explained 책

SQL 성능에 관한 매우 인기 있는 책 SQL Performance Explained를 쓰셨습니다. 다른 SQL 책들과 비교하면 어떻고 왜 독자들이 이 책을 사야 할까요?

두 번째 질문부터 시작하겠습니다. 먼저 SQL Performance Explained의 전체 내용이 http://use-the-index-luke.com/ 에서 무료로 제공된다는 것을 아셔야 합니다. 왜 책을 샀는지 물어본 대부분의 사람들은 웹사이트가 좋아서 샀다고 합니다. 그들은 Use The Index, Luke에 대한 제 작업을 지원하기 위해(매우 감사합니다!) 또는 더 중요하게는 처음부터 끝까지 책을 읽고 싶어서 책을 샀습니다. 제가 받는 전형적인 대답은 이런 식입니다: "Use The Index, Luke를 몇 년 동안 알고 있었고 거기서 많은 글을 읽었지만, 마침내 처음부터 끝까지 모든 것을 읽고 싶었습니다."

이제 첫 번째 질문인 왜 세상에 또 다른 SQL 성능 책이 필요했는지에 대해 말씀드리겠습니다: 필요하지 않았습니다. 그래서 저는 하루도 안 걸려 읽을 수 있는 매우 작은 책을 썼습니다. 대부분의 데이터베이스에서 동일한 기본 개념에 집중했고 덜 일반적인 특수 사례는 과감하게 생략했습니다. 이 짧은 분량은 리뷰에서도 가장 호평받는 부분입니다. 반면에 이 책은 가끔 불완전하다는 비판을 받기도 합니다—아마도 부제가 "개발자가 SQL 성능에 대해 알아야 할 모든 것"이라고 되어 있기 때문일 것입니다. 개인적으로 이러한 비판이 어떻게 보면 제 주장을 증명한다고 생각합니다: 분명히 Java, PHP 또는 .NET 개발자는 데이터베이스 성능 컨설턴트만큼 SQL 성능에 대해 많이 알 필요가 없습니다. 그러한 독자를 위해 글을 쓸 때는 많은 것을 생략해야 합니다.

---

## 질문 4: 10년 후의 SQL

10년 후 SQL은 어떻게 될 것이라고 보시나요?

저는 SQL:2011의 시간적(temporal) 기능이 무료 오픈 소스 데이터베이스에서도 일반적으로 사용 가능해지길 바랍니다. 현재로서는 상용 데이터베이스에서만 사용할 수 있으며—그곳에서도 완성도와 표준 준수는 다양합니다. 또한 모든 데이터베이스 벤더가 자체 독점 JSON 함수 세트를 추가하는 현재 추세에 SQL 표준이 대응할 방법을 찾길 바랍니다. 안타깝게도 이미 너무 늦었을 수도 있습니다.

그러나 제 가장 큰 바람은 개발자들이 "SQL은 1992년에 멈춰 있지 않다"는 것을 깨닫는 것입니다. 표준은 그 이후로 많은 유용한 기능을 추가해 왔습니다. 대부분의 데이터베이스는 이러한 기능의 상당 부분을 제공합니다. 정말로 1992년에 멈춰 있는 것은 SQL에 대한 우리의 인식일 뿐입니다.

---

## Markus의 작업에 대해 더 알아보기

Markus는 컨퍼런스에서 그의 Modern SQL 강연을 하고 있습니다. 여기에서 더 알아보세요:

Modern SQL in Open Source and Commercial Databases - Markus Winand
