# jOOQ 화요일: Chris Saxon이 모든 개발자가 SQL에 대해 알아야 할 3가지를 설명하다

> 원문: https://blog.jooq.org/jooq-tuesdays-chris-saxon-explains-the-3-things-every-developer-should-know-about-sql/

jOOQ 화요일 시리즈에 오신 것을 환영합니다. 이번 인터뷰에서는 Oracle의 Ask Tom 팀에서 활동하고 있는 Chris Saxon을 만나 개발자들이 알아야 할 필수 SQL 지식에 대해 이야기를 나눕니다.

## Ask Tom 팀에서 일하는 것은 어떤가요? 그렇게 큰 커뮤니티를 위해 일하는 것은 어떤 느낌인가요?

정말 놀라운 경험입니다. 저는 커리어 초기에 PL/SQL 개발자로 일하면서 Ask Tom을 통해 SQL을 배웠습니다. 이제 제가 다른 사람들의 지속적인 문제 해결을 도울 수 있다는 것이 큰 보람입니다. 가장 좋은 부분은 누군가가 며칠 동안 고민하던 문제를 해결할 수 있도록 도왔을 때 받는 긍정적인 피드백입니다. 우리의 핵심 사명은 개발자들이 SQL 스킬을 향상시키고 데이터베이스를 효과적으로 사용할 수 있도록 돕는 것입니다.

## Ask Tom에서 받았던 가장 흥미로운 질문 세 가지는 무엇인가요?

SQL의 유연성을 보여주는 세 가지 질문을 꼽아보겠습니다:

1. 서로 다른 그룹에서 이전 행을 찾는 문제: Oracle의 MODEL 절을 사용하여 트랜잭션 유형 간에 값을 참조하는 솔루션을 제시했습니다. 이후 커뮤니티 멤버들이 윈도우 함수와 MATCH_RECOGNIZE를 사용하여 더 개선된 방법을 제안했습니다.

2. 카르테시안 곱을 효율적으로 생성하는 문제: 텍스트에서 모든 약어 조합을 생성하는 문제였는데, 여러 테이블을 조인하는 방식의 확장성 문제를 재귀적 CTE를 사용하여 해결했습니다.

3. SQL과 PL/SQL 성능 비교: 누락된 인덱스로 인해 PL/SQL이 SQL보다 더 좋은 성능을 보이는 것처럼 나타난 사례였습니다. 추가 인덱스 없이 MERGE 문을 사용하여 문제를 해결할 수 있었습니다.

## SQL 개발자들은 마법사인가요?

Arthur C. Clarke의 유명한 말을 인용하고 싶습니다: "충분히 발전한 기술은 마법과 구별할 수 없다." 저는 SQL 개발자들이 특별한 마법을 가지고 있다고 생각합니다. 그것은 데이터 변화에 적응하는 최소한의 코드로 복잡한 문제를 해결하는 능력입니다. 그래서 제 YouTube 채널 이름을 "The Magic of SQL"로 지었습니다.

## 윈도우 함수가 여전히 개발자들에게 잘 알려지지 않은 이유는 무엇인가요?

Oracle은 1990년대부터 윈도우 함수를 지원해왔는데, 여전히 많은 개발자들이 이를 모르고 있습니다. 몇 가지 이유가 있습니다:

- "데이터베이스 독립적" 코딩 관행이 SQL을 추상화시킵니다
- 도구와 프레임워크가 개발자들로부터 SQL을 숨깁니다
- SQL을 직접 작성하지 않는 개발자들의 노출이 제한됩니다

하지만 이러한 상황은 변화하고 있습니다. 더 적은 코드로 더 나은 성능을 내기 위해 SQL의 힘을 인식하는 개발자들이 늘어나고 있습니다.

## 모든 개발자가 SQL에 대해 알아야 할 세 가지는 무엇인가요?

### 1. 집합 기반 처리(Set-Based Processing)를 이해하라

커서 루프 안에서 개별 SQL 문을 반복적으로 실행하는 자신을 발견한다면, 잘못하고 있는 것입니다. 행 단위가 아닌 여러 행을 한 번에 처리해야 합니다.

콘플레이크 비유로 설명하자면: 아침에 시리얼 한 그릇을 먹을 때, 한 플레이크씩 집어서 입에 넣고, 씹고, 삼키고, 다시 한 플레이크를 집는 방식으로 먹지 않습니다. 한 숟갈 가득 퍼서 한 번에 먹습니다. SQL도 마찬가지입니다.

비효율적인 루프 기반 접근 방식 대신 RETURNING 절과 함께 INSERT 및 UPDATE 문을 사용하는 효율적인 대량 작업을 사용해야 합니다.

### 2. 실행 계획(Execution Plans)을 배워라

실제 실행 계획을 이해하는 것이 중요합니다 - 단순한 EXPLAIN 계획이 아니라 실제 실행 계획을 말합니다. EXPLAIN 계획은 데이터베이스가 할 것이라고 예측하는 것을 보여주지만, 실행 계획은 데이터베이스가 실제로 무엇을 했는지 보여줍니다.

실행 계획에는 각 단계에서 수행된 작업량, 빈도, 처리 시간에 대한 통계가 포함됩니다. 성능 문제 해결을 도와드리려면 쿼리가 실제로 무엇을 하고 있는지 알아야 합니다. 인덱스 지식과 결합하면, 개발자들은 종종 스스로 성능 문제를 해결할 수 있습니다.

### 3. 바인드 변수(Bind Variables)를 사용하라

SQL 인젝션은 많은 회사에 영향을 미친 잘 알려진 취약점입니다. 웹 애플리케이션에 SQL 인젝션 취약점이 있다면, 결국 공격을 받게 될 것입니다.

바인드 변수는 SQL 인젝션 공격을 방지합니다. 또한 Oracle이 실행 계획을 캐시할 수 있게 해주어 성능도 향상시킵니다. 이것은 보안과 애플리케이션 무결성을 위해 필수적입니다.

## Oracle은 언제 BOOLEAN 타입을 지원하나요?

우리에겐 BOOLEAN 타입이 있습니다! 단지 PL/SQL에서만 사용 가능할 뿐입니다.

커뮤니티는 Oracle의 Database Ideas 포럼을 통해 SQL 지원을 요청하고 있습니다. 추가 투표는 구현 가능성을 높입니다. SQL 네이티브 BOOLEAN 타입을 원하신다면, 거기에 가서 투표해 주세요!

---

리소스:
- Ask Tom 웹사이트: asktom.oracle.com
- YouTube 채널: "The Magic of SQL"
- Oracle Database Ideas 포럼 (BOOLEAN 타입 기능 투표)
