# 레이어드 아키텍처를 구현하면 안 되는 이유
> 원문: https://blog.jooq.org/why-you-should-not-implement-layered-architecture/

소프트웨어의 추상화 레이어는 아키텍처 우주비행사들이 당신에게 하라고 말하는 것입니다. 하지만 실제로는, 세상에 존재하는 애플리케이션의 절반은 그 모든 레이어들을 없애버리면 훨씬 쉽고, 재미있고, 가장 중요하게는 생산적으로 구현할 수 있을 것입니다.

솔직히 말해서, 당신에게 정말 필요한 것은 무엇인가요? 다음 두 가지가 필요합니다:

- 데이터 접근
- UI

왜냐하면 이 두 가지가 대부분의 시스템에서 필연적으로 가지게 되는 것들이기 때문입니다. 사용자와 데이터.

[Kyle Boon의 Ratpack과 jOOQ에 대한 트윗 참조]

물론 다른 API를 선택할 수도 있습니다. JSP에 직접 JDBC를 작성할 수도 있습니다. 왜 안 되겠습니까. 13개의 추상화 레이어를 쌓아 올리지만 않는다면요.

그건 다 헛소리라고요? 기반 구현을 변경할 수 있도록 추상화하기 위해 레이어가 _필요하다고요_? 좋습니다, 이에 대해 진지하게 생각해 봅시다. 실제로 구현을 _얼마나_ 자주 변경하나요? 몇 가지 예를 들어보겠습니다:

- SQL. Oracle에서 DB2로 구현을 변경하는 일은 거의 없습니다
- DBMS. 관계형에서 플랫 파일이나 XML, JSON으로 모델을 변경하는 일은 거의 없습니다
- JPA. Hibernate에서 EclipseLink로 전환하는 일은 거의 없습니다
- UI. HTML을 Swing으로 대체하는 일은 그냥 없습니다
- 전송 계층. HTTP에서 SOAP로 전환하는 일은 그냥 없습니다
- 트랜잭션 레이어. JavaEE를 Spring으로, 또는 JDBC 트랜잭션으로 대체하는 일은 그냥 없습니다

그렇습니다. 당신의 아키텍처는 _아마도_ 돌에 새겨져 있는 것입니다. 그리고 만약 - 엔트로피와 운명의 믿을 수 없는 영향력에 의해 - 어떤 측면에서 약 3년 전에 잘못된 결정을 내렸다면, 어쨌든 대규모 리팩토링이 필요하게 됩니다. SQL이 잘못된 선택이었다면, MongoDB로 모든 것을 마이그레이션하는 데 행운을 빕니다(MongoDB는 그 자체로 또 다른 잘못된 선택이니, 다시 되돌아올 준비를 하세요). HTML이 잘못된 선택이었다면, 더욱 힘든 일이 될 것입니다. 구체적인 사건이 발생했을 때 레이어가 실제로 도움이 되지 않을 확률: 95% (중요한 세부 사항을 놓쳤기 때문에)

## 레이어 = 보험

여전히 매우 멋진 레이어드 아키텍처를 구현하려고 생각하고 있다면, 완전한 스택을 다른 것으로 _간단히 교체하는_ 거의 모든 상황에 대처할 준비가 된 아키텍처 말입니다, 그렇다면 당신이 실제로 하고 있는 것은 수십 개의 보험 정책에 가입하는 것입니다. 이렇게 생각해 보세요. 다음과 같은 것들을 가입할 수 있습니다:

- 법률 보험
- 제3자 보험
- 재보험
- 사업 중단 보험
- 사업 간접비 장애 보험
- 핵심 인물 보험
- 운송 보험
- 전쟁 위험 보험
- 결제 보호 보험
- ... 무작위 카테고리를 선택하세요

당신에게 _아마도_ 일어나지 않을 일들에 대해 미리 계속 지불할 수 있습니다. 일어날까요? 네, 일어날 수도 있습니다. 하지만 그 모든 보험을 구입하면, 선불로 많은 비용을 지불하게 됩니다. 그리고 비밀 하나 알려드리죠. 만약 _어떤_ 사건이 실제로 발생하면, 아마도 당신은:

- 그 특정 보험에 가입하지 않았거나
- 적절하게 보장받지 못하거나
- 약관을 읽지 않았거나
- 당하게 됩니다

그리고 당신은 정확히 그런 짓을 _모든_ 애플리케이션에서 하고 있는 것입니다. 그 애플리케이션은 이미 완성되어 고객에게 가치를 더하고 있을 수도 있는데, 당신은 아직도 비즈니스 규칙과 변환 레이어 사이의 37번째 레이어에서 규칙 엔진이 언제든지 교체될 수 있으니 또 다른 추상화가 실제로 필요한지 토론하고 있는 것입니다.

## 그만 하세요

요점을 이해하셨을 겁니다. 무한한 시간과 돈이 있다면, 처음부터 멋지고 거대한 아키텍처를 구현하세요.

당신의 경쟁자의 시장 출시 시간(그리고 그 과정에서의 즐거움)은 당신보다 낫습니다. 하지만 짧은 기간 동안, 당신은 완벽한 레이어드 아키텍처에 _그렇게_ 가까웠습니다!
