# 긴급한 버그를 수정하기 위해 IDE를 패치하는 방법

> 원문: https://blog.jooq.org/how-to-patch-your-ide-to-fix-an-urgent-bug/

## 문제 상황

시간이 촉박합니다. JDK 11은 JEP 320을 통해 다수의 deprecated 모듈을 제거할 예정이며, 여기에는 Java EE 모듈이 포함되고, 그 안에는 jOOQ를 포함한 많은 라이브러리의 의존성인 JAXB가 포함되어 있습니다.

Java 11 호환성을 위해 라이브러리를 모듈화해야 하지만, IDE 도구 지원이 아직 완전하지 않아 다음과 같은 심각한 버그들이 발생합니다:

- `@Deprecated` 어노테이션 처리 시 `ArrayIndexOutOfBoundsException` 발생
- Java 10+ 프로젝트에서 deprecated 클래스 import 시 `NullPointerException` 발생

## 해결책 개요

벤더의 공식 릴리스를 기다리는 대신, 다음 방법으로 IDE를 직접 패치할 수 있습니다:

## 단계별 해결 방법

### 1. IDE 소스 코드 얻기

전체 소스 코드가 포함된 "Eclipse IDE for Eclipse Committers" 배포판을 다운로드합니다.

### 2. 패치 프로젝트 생성

필요한 JDT(Java Development Tools) 의존성을 포함한 새로운 빈 플러그인 프로젝트를 생성합니다.

### 3. 문제가 있는 클래스 파일 복사

문제가 발생하는 소스 코드를 찾아 여러분의 프로젝트로 복사합니다.

### 4. 패치 적용

소스 코드를 수정하여 문제를 해결합니다.

### 5. 수정된 클래스 컴파일

플러그인 프로젝트 내에서 수정된 클래스를 컴파일합니다.

### 6. 컴파일된 .class 파일 찾기

프로젝트의 빌드 디렉토리에서 컴파일된 `.class` 파일을 찾습니다.

### 7. 바이너리 교체

zip 유틸리티를 사용하여 `/plugins` 폴더에 있는 Eclipse 플러그인 JAR 파일을 열고, 원본 클래스 파일을 패치된 버전으로 교체합니다.

### 8. IDE 재시작

변경 사항을 활성화하기 위해 Eclipse를 재시작합니다.

## 원인을 알 수 없는 버그를 위한 고급 디버깅 방법

기존 수정 방법이 없는 버그의 경우, 다음 접근 방식을 권장합니다:

### 디버그 모드로 Eclipse 실행

`eclipse.ini` 파일에 다음과 같은 디버그 매개변수를 추가합니다:

```
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8000
```

### 원격 디버거 연결

별도의 "Eclipse IDE for Eclipse Committers" 인스턴스에서 원격 디버거를 연결합니다.

### 브레이크포인트 설정

문제가 되는 코드 경로를 분석하기 위해 브레이크포인트를 설정합니다.

### 우회 방법 구현

문제가 있는 기능을 비활성화하는 등의 타겟팅된 우회 방법을 구현합니다.

## 핵심 장점

Java의 동적 클래스 로딩(dynamic class-loading) 기능은 전체 애플리케이션을 다시 컴파일하지 않고도 런타임에 클래스를 교체할 수 있게 해줍니다. 이로 인해 적절한 수정 권한이 있는 사람들에게 벤더 코드 패치가 놀라울 정도로 간단해집니다.

## 결론

이 실용적인 접근 방식을 통해 개발자는 공식 버그 수정을 기다리는 동안에도 생산성을 유지할 수 있습니다. IDE나 다른 도구에서 심각한 버그를 만났을 때, 공식 패치가 나올 때까지 마냥 기다리지 않고 직접 문제를 해결할 수 있는 능력은 개발자에게 큰 장점이 됩니다.
