# jOOQ 화요일: Oliver Gierke가 Spring Data에 대해 이야기하다

> 원문: https://blog.jooq.org/jooq-tuesdays-oliver-gierke-talks-about-spring-data/

jOOQ 화요일 시리즈에 오신 것을 환영합니다. 이 시리즈에서는 격월로 셋째 주 화요일에 jOOQ 관점에서 흥미롭다고 생각하는 업계 인사를 인터뷰한 글을 게시합니다. 여기에는 SQL, Java, 오픈 소스 및 다양한 관련 주제를 다루는 분들이 포함됩니다.

오늘 DDD와 REST에 대해 강한 의견을 가진 Pivotal의 Spring Data 프로젝트 리드인 Oliver Gierke를 소개하게 되어 매우 기쁩니다.

## 인터뷰

2011년부터 대부분 Pivotal(이전 SpringSource)에서 Spring Data 프로젝트 리드로 일해 오셨는데요. 데이터 작업에서 가장 매력적인 부분은 무엇인가요?

솔직히 말씀드리면, 저를 Spring Data로 이끈 것은 데이터 자체가 아닙니다. SpringSource에 합류하기 전부터 작업했던 JPA 모듈의 전신도 마찬가지입니다. 오히려 소프트웨어의 복잡성을 관리하는 것에 대한 관심이었습니다. 복잡성 관리에 대해 이야기할 때, 도메인 주도 설계(Domain-Driven Design)와 값 객체(value objects), 엔티티(entities), 애그리거트(aggregates), 그리고 리포지토리 개념 같은 구성 요소에 대해 이야기하지 않을 수 없습니다. 그리고 이것이 결국 데이터 접근 영역으로 이어집니다.

따라서 Spring Data 팀으로서 우리는 항상 서로 다른 동력들 사이에서 균형을 맞춰야 합니다. 첫째, 애플리케이션 코드에서 사용하는 추상화 수준과 프로그래밍 모델, 그리고 그것이 당면한 비즈니스 문제를 해결하는 도메인 로직을 실제로 얼마나 잘 그리고 쉽게 구현할 수 있게 해주는지입니다. 둘째, 서로 다른 데이터 저장소가 이미 내린 다양한 트레이드오프와, 사용자들이 그것을 활용할 수 있도록 허용하면서 동시에 프로그래밍 모델의 공통점을 노출하여 개발자들이 특정 이유로 다른 저장소를 사용하는 프로젝트 간에 지식을 쉽게 전달할 수 있도록 하는 것입니다. Spring Data는 그 간극을 메우려고 노력합니다. 애그리거트와 리포지토리 모델링에 대한 낮은 진입 장벽을 제공하면서 동시에 최우선 순위가 효율성인 경우 많은 개발자 제어가 필요한 매우 효율적인 데이터 접근 수단으로 돌아갈 수 있는 도구를 사용자에게 제공합니다.

Spring Data는 관계형 데이터 모델을 훨씬 넘어서는 인상적인 수의 공식 및 비공식 지원 모듈을 가지고 있습니다. 단일 API에서 이렇게 많은 모델과 기술을 다루는 데 있어 가장 큰 도전은 무엇인가요?

확실히 기반 영속성 기술들의 접근 방식과 트레이드오프의 다양성입니다. 사실 그것이 Spring Data가 단일 통합 API를 제공하려고 하지 않는 이유 중 하나입니다. 특정 카테고리의 저장소, 예를 들어 문서 데이터베이스에 대해서도 그렇게 하려고 하지 않습니다. 우리는 오히려 일반적인 Spring 생태계 철학을 택하여 리포지토리와 데이터 접근 공간에 구현했습니다: 추상화의 목적을 쉽게 이해할 수 있도록 반복 가능한 패턴으로 일관된 프로그래밍 모델을 갖추되, 저장소별 특성을 추상화하여 숨기는 것이 아니라 개발자가 필요할 때 활용할 수 있도록 노출시키는 것입니다.

인터페이스 기반 리포지토리 추상화의 일반적인 개념이 세상에서 가장 혁명적인 것은 아닙니다, 인정합니다. 하지만 우리는 이제 실제로 API인 프로그래밍 모델 부분을 설계한 거의 10년간의 경험을 되돌아보고 있으며, 우리가 저지른 실수로부터 많이 배웠다고 생각합니다. Java 8이 다가오는 2세대 Spring Data의 기준선이 될 것이며, 이는 API 측면에서 우리의 선택지를 풍부하게 합니다. 리액티브 프로그래밍도 현재 뜨거운 주제입니다. 그래서 이 공간에서 저글링해야 할 공이 많습니다.

가장 좋아하는 모듈은 무엇이고, 그 이유는 무엇인가요?

물론 말하기 어렵습니다. 개별 저장소 모듈들이 시간이 지나면서 어떻게 발전했는지 보는 것은 정말 멋진 일이었거든요. 하지만 저는 Commons 모듈과 특별한 관계를 맺게 되었습니다. 이 모듈은 모든 저장소 모듈의 기반이며 기본적으로 Spring Data의 심장과 영혼을 담고 있습니다: 객체 매핑 기능, 리포지토리 프록시 구현 등이요. 그리고 종종 거기에 기능을 추가하면 그 기능이 모든 저장소의 리포지토리에서 즉시 사용 가능하게 되는 것을 보는 것은 훌륭한 일입니다.

스펙트럼의 반대편에는 Spring Data REST가 있습니다. 이 모듈은 애그리거트와 리포지토리 정의를 기반으로 RESTful 리소스를 노출합니다. 저는 이것도 매우 좋아합니다. 리포지토리 API를 노출하는 모든 Spring Data 모듈에서 작동하며 이러한 추상화 위에서 무엇을 달성할 수 있는지 보여주는 훌륭한 쇼케이스입니다. 또한 개발자들이 REST에서 종종 간과되는 여러 측면을 인식하게 하는 데 정말 도움이 되었습니다. 하지만 그 부분은 곧 다루게 될 것 같네요.

크고 널리 사용되는 API를 유지보수하는 것은 어렵습니다. 수많은 사용자 요청의 균형을 맞추고, 서드파티 기능을 통합하고, 하위 호환성을 유지해야 하죠. 공유하고 싶은 메인테이너 전쟁 이야기가 있으신가요?

확실히 어렵습니다. 특히 동시에 많은 - 때때로 상충하는 - 힘이 작용할 때 그렇습니다. 모듈의 버전 관리 문제부터 시작합니다: 우리가 실제로 여기서 버전 관리하는 것은 무엇인가요? 사용자 대면 API입니다. 하지만 API의 어떤 부분이 그것인가요? 그것은 사용자가 동작을 얼마나 커스터마이징하는지에 완전히 달려 있습니다. 새로운 데이터 저장소를 위한 Spring Data 모듈을 구축하는 개발자도 사용자인가요? 물론입니다, 하지만 매우 다른 종류의 사용자입니다. 우리는 보통 애플리케이션 개발자에게 영향을 줄 수 있는 변경에 대해서는 매우 보수적이지만, 저장소 모듈 구현자에게는 좀 더 엄격합니다.

이 모든 것이 우리가 일상적으로 다루어야 했고 다루고 있는 것들입니다. 흥미롭게도, 우리는 더 넓은 Spring 엔지니어링 팀에서 릴리스 트레인 개념을 처음으로 도입한 팀이었습니다 - 우리는 모든 모듈의 릴리스를 함께 묶어 유명한 컴퓨터 과학자의 이름을 붙입니다 -, 이 개념은 Eclipse 팀에 의해 대중화되었습니다. 이 접근 방식은 우리에게 잘 작동했고 이제 Spring Cloud, Reactor 및 다른 팀들도 채택했습니다.

Oliver, 물어봐야 할 것 같은데요, 왜 모든 사람들이 REST를 오해하나요?

이 맥락에서 이 질문이 나올 줄은 몰랐는데, 인터넷에서 이 주제에 대해 모호하거나 - 제 의견으로는 - 완전히 틀린 사람들에 대해 불평하는 명성을 쌓은 것 같습니다 :D

제 생각에 REST가 가진 근본적인 문제는 일부 부분은 이해하고 구현하기가 적당히 쉽다는 것입니다. 요즘은 모든 사람이 URI가 멋진 것이고 주어진 작업에 올바른 HTTP 동사를 사용하는 것이 좋은 생각이라는 데 동의합니다. 하지만 후자에 대해서도 왜 POST보다 PUT 요청을 선호하는 것이 좋은 생각인지 이해하지 못하는 사람들을 쉽게 찾을 수 있습니다. 이것이 이미 우리를 두 번째 부분으로 이끕니다.

그런 다음 파악하기 더 어렵고 구현하기도 좀 더 어려운 부분들이 있습니다. 하이퍼미디어 측면이 떠오릅니다. 불행히도 이러한 측면들이 당신이 구축하는 것이 REST가 약속하는 것을 이행하는지에 크게 영향을 미칩니다: 예를 들어 확장성(scalability)과 진화가능성(evolvability)을 제공하는 아키텍처 스타일이 되는 것 말입니다. 그래서 사람들은 기본적으로 이러한 측면들을 무시하기 시작합니다. 때로는 필요 없다고 노골적으로 주장하기까지 하면서 말이죠. 그러고는 돌아서서 REST가 약속을 이행하지 않는다고 비판합니다.

제 의견으로는 이것이 현실에서 너무 흔하게 관찰되는 패턴입니다. 하지만 이 상황을 개선하는 유일한 방법은 이러한 측면들을 더 쉽게 구현할 수 있도록 하고, 그러한 고급 제약 조건을 따를 때 얻는 이점에 대한 좋은 예시를 만드는 것뿐이라고 생각합니다.
