# NATS 2.12.1

날짜: 2025-12-07

Jepsen이 수행한 NATS 2.12.1 테스트에서 분산 스트리밍 시스템의 JetStream 하위 시스템에 대해 조사했습니다. 테스트 결과 "파일 손상 또는 시뮬레이션된 노드 장애에 대응하여 데이터를 손실하거나 지속적인 분할 뇌(split-brain) 상태에 빠질 수 있다"는 것을 발견했습니다.

데이터 손실의 주요 원인은 기본 `fsync` 정책으로, 이것이 승인(acknowledgement) 전이 아닌 2분마다 한 번씩 디스크에 데이터를 플러시했습니다. 단 하나의 커널 크래시나 전력 장애도 프로세스 일시 중지 또는 네트워크 분할과 결합될 경우 NATS 복제본이 승인된 메시지를 손실할 수 있습니다.

NATS는 기본 lazy `fsync` 설정을 문서화했으며, 발견된 다른 문제들을 검토 중입니다.
