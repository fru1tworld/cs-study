# Hazelcast 3.8.3 Jepsen 분석

## 개요
이 분석은 Hazelcast 3.8.3이 네트워크 분할 상황에서 제공하는 안전성 보장을 검증합니다.

## 핵심 발견사항

### 문제점들
- 맵(Map)에서 업데이트 손실 발생
- 고유 ID 생성기가 중복 ID 발급
- 원자적 객체(AtomicReference)가 비원자적으로 동작
- 락이 상호배제를 보장하지 못함
- 큐가 삽입된 요소를 손실할 수 있음

## 테스트 방법

분석팀은 Jepsen 분산 시스템 테스트 라이브러리를 사용하여 5개 노드에서 Hazelcast의 여러 데이터 구조를 평가했습니다. 의도적으로 15초 네트워크 분할을 도입한 후 복구 과정을 관찰했습니다.

## 주요 테스트 결과

락(Locks): 분할 발생 직후 이미 보유 중인 락을 다른 클라이언트들이 획득할 수 있었습니다.

큐(Queues): 약 2%의 성공적으로 삽입된 메시지가 조용히 폐기되었습니다.

원자적 참조(AtomicReferences): "생성된 숫자 중 약 10%가 중복되었습니다."

맵(Maps): 대다수 보호 정책을 적용했음에도 4개 수정사항이 손실되었습니다.

## CRDT 기반 해결책

성공적인 접근: 맵에 합병 정책(set union)을 구현하면 모든 승인된 요소가 보존됩니다.

## 권고사항

문서에 명시적 경고를 추가하고, 일관성이 필요한 사용 사례에는 합의 기반 알고리즘(ZAB, Raft)의 도입을 제안합니다.
