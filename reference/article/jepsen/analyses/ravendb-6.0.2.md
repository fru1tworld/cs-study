# RavenDB 6.0.2 Jepsen 분석

## 핵심 발견사항

Jepsen의 Kyle Kingsbury는 RavenDB 6.0.2에서 심각한 트랜잭션 안전성 문제를 발견했습니다.

## 주요 결함 세 가지

### 1. 단일 노드 트랜잭션에서의 손실된 업데이트 (Issue #17927)
- 기본 설정에서 업데이트가 자동으로 손실됨
- 12,886개 트랜잭션 중 81개 키에서 입증된 손실 발생
- 454개 키가 호환되지 않는 순서 위반 표시

### 2. 낙관적 동시성 제어의 분할된 읽기 (Issue #17929)
- 트랜잭션이 다른 트랜잭션의 일부 효과만 관찰 가능
- "일부는 보지만 모두를 보지 못하는" 이상 현상 발생

### 3. 클러스터 전체 트랜잭션의 분할된 읽기 (Issue #17928)
- 직렬화 가능성을 보장한다고 주장하지만 위반 발생
- 단일 노드 시스템에서도 수백 개의 위반 관찰

## 마케팅과 현실의 불일치

RavenDB는 "완전 ACID" 트랜잭션을 광고하지만, CEO Ayende Rahien은 나중에 "RavenDB는 단일 HTTP 요청을 초과하는 트랜잭션을 지원하지 않는다"고 명시했습니다.

## 권장사항

보고서는 RavenDB가 다음을 수행할 것을 권고합니다:

- 마케팅 자료에서 "ACID", "직렬화 가능", "스냅샷 격리" 제거
- 실제 안전 속성에 대한 명확하고 정확한 설명 제공
- "트랜잭션"과 "세션"의 정의 통일
- 가용성과 일관성 간 트레이드오프 명시

보고서는 "일관성 모델 없이 ACID 트랜잭션을 제공할 수 없다"고 결론지으며, RavenDB 사용자는 동시 실행 중 응용 불변성이 보존되는지 테스트해야 한다고 경고합니다.
