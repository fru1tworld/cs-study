# 다크 모드의 심장부: 완료되었지만, 여전히 진행 중

*원문: [Heart of dark mode: done, and still in progress](https://tailscale.com/blog/heart-of-dark-mode)*

게시일: 2024년 8월 29일
저자: Alessandro Mingione, Ross Zurowski
기여자: Parker Higgins
카테고리: 인사이트
읽기 시간: 13분

---

![다크 모드의 관리 콘솔 스크린샷](https://cdn.sanity.io/images/w77i7m8x/production/3611fff3362bcf5dad82fd59905136a92cd8af16-2787x1488.png)

## 서론

Tailscale이 드디어 어둠의 편에 합류했습니다. 관리 콘솔에 다크 모드 지원을 출시한 것입니다. 다크 모드 사용자들은 종종 열정적이고 목소리가 큰 편이어서, 이 기능을 올바르게 구현해야 한다는 압박이 있었습니다.

저희 팀은 iOS, Android, Apple TV 애플리케이션을 통해 다크 모드에 대한 경험을 이미 갖고 있었습니다. 하지만 관리 콘솔에 다크 모드를 통합하려면 더 깊은 디자인 시스템 작업이 필요했습니다. 모든 웹 컴포넌트와 디자인 로직이 이곳에 모여 있기 때문입니다. 저희 프로젝트는 접근성을 위한 Radix와 함께 React를 사용하고, 스타일링에는 Tailwind를 사용합니다.

관리 콘솔의 다크 모드 작업을 하면서 웹용 제품들에 절실히 필요했던 일관성을 가져올 수 있었습니다.

## 라이트 모드의 속도로 작업하기

### 색상 팔레트 과제

![밝기/채도 차이를 보여주는 파란색 차트](https://cdn.sanity.io/images/w77i7m8x/production/e9c9fe19ff8e24001be9fb936a0454e43d4c45cc-1818x718.png)

색상 스케일은 일반적으로 밝고 채도가 높은 중간점을 특징으로 하지만, 양 극단에서는 분기됩니다. 색상의 특성을 유지하려면 낮은 밝기에는 높은 채도가, 높은 밝기에는 낮은 채도가 필요합니다.

비활성화된 버튼의 경우, 디자이너들은 비활성 상태를 암시하는 음소거된 색상을 선호합니다. 라이트 모드에서는 밝은 색조가 자연스럽게 낮은 채도를 가지기 때문에 이것이 간단했습니다. 하지만 다크 모드에서는 복잡한 문제가 발생했습니다.

![라이트/다크 모드 버튼 활성화/비활성화 상태 비교](https://cdn.sanity.io/images/w77i7m8x/production/c959d4939386d52a1729c5301a78f0e254e2e4ec-1404x513.png)

다크 모드에서 밝은 색조는 어두운 배경에 대한 대비를 증가시켜, 비활성화된 버튼이 활성화된 버튼보다 더 눈에 띄게 보이게 됩니다. 반면 어두운 색조는 채도를 증가시켜 버튼이 덜 비활성화된 것처럼 느껴지게 합니다.

저희 팀은 세 가지 선택지에 직면했습니다:
- 전체 색상 팔레트를 재작업한다 (출시 지연)
- 다크 모드에 최적화된 대체 팔레트를 만든다 (역시 출시 지연)
- 최적이 아닌 비활성화 상태를 받아들인다 (경험 저하)

저희는 네 번째 길을 선택했습니다: 기본 색상의 높은 채도에도 불구하고 불투명도(opacity)를 사용하여 비활성 상태를 전달하는 것입니다. 디자이너들은 일반적으로 복잡성이 증가하기 때문에 불투명도 사용을 피하지만, 저희 팀의 제한된 배경색 팔레트 덕분에 이 방식이 관리 가능했습니다.

### 레이어링과 그림자

라이트 모드에서는 배경 간의 미묘한 밝기 변화가 잘 작동합니다. 하지만 다크 모드에서는 다른 접근 방식이 필요했습니다.

![구분이 어려운 다크 그레이 비교](https://cdn.sanity.io/images/w77i7m8x/production/2fb6568d84f484f989bc82b6f9eb33cec6e08b10-1232x616.png)

`gray-900`과 `gray-800`의 차이는 거의 인식할 수 없을 정도였습니다.

10% 불투명도의 검은색 그림자는 라이트 모드에서 효과적으로 깊이를 더하지만, 다크 모드의 이미 어두운 환경에서는 실패합니다. 대화상자나 토스트 같은 레이어된 UI 요소에서 대비 문제가 더욱 뚜렷해졌습니다.

![조정 없이 깊이감이 부족한 다크 대화상자](https://cdn.sanity.io/images/w77i7m8x/production/6caf0905a5865aaf6d8c4b9f6a0df4c06fad2b65-1232x1788.png)

저희 팀은 여러 가지 해결책을 구현했습니다:
- 색상 스케일에 `gray-1000`(더 어두운 회색)을 추가
- 올라온(elevated) 표면에 테두리를 도입
- 그림자 불투명도를 200% 이상 증가

![조정 후 가시성이 개선된 다크 대화상자](https://cdn.sanity.io/images/w77i7m8x/production/d9d6c78cc196fe5daf986661cd03cd79cf2e9b66-3840x5573.webp)

이러한 조정들이 쌓여 다크 모드 인터페이스에서 모달의 높이감과 시각적 계층 구조가 개선되었습니다.

## 어둠을 두려워하는 자가 있는가?

저희 팀은 다크 모드 작업이 자연스럽게 축적된 기술 부채를 해결하고 전반적으로 디자인 시스템을 개선한다는 것을 발견했습니다.

### 컴포넌트 단순화

`Snippet` 컴포넌트(복사 가능한 코드 스니펫을 표시하는)는 이전에 세 가지 변형을 가지고 있었습니다: `light`, `dark`, `basic`. 다크 모드를 위해 재검토하면서 `basic` 변형이 일회성 실수였음이 드러났습니다. 원래 스타일적이었던 `light`와 `dark` 변형은 이중 테마 조건에서 재고가 필요했습니다. 저희 팀은 결국 두 대안을 모두 제거하고 단일 적응형 스타일만 유지했습니다.

### 포커스 상태

라이트 모드만 지원할 때는 기본 브라우저 스타일과 문제가 있는 컴포넌트에 대한 커스텀 수정을 혼합할 수 있었습니다. 다크 모드에서 브라우저 불일치가 드러났습니다. 일부 브라우저에는 특정 다크 모드 포커스 상태 스타일링이 없습니다. 이로 인해 저희 팀은 두 테마 모두에서 모든 포커스 스타일을 커스터마이징하게 되었고, Tailwind의 `ring` 클래스와 `outline` 클래스 중 어느 것을 사용할지 결정해야 했습니다(접근성 이유로 `outline`을 선택했습니다).

### 시맨틱 변수 확장

특정 회색을 기억하는 대신(라이트 모드에서는 `text-gray-500`, 다크 모드에서는 `dark:text-gray-400`), 저희 팀은 `text-text-muted`와 같은 시맨틱 수정자를 만들었습니다. 이 단일 클래스는 테마 전체에서 올바른 색조를 보장합니다.

CSS 구현 예시:

```css
@layer base {
  :root {
    --color-text-muted: rgb(var(--color-gray-500) / 1);
    --color-outline-focus: rgb(var(--color-blue-100) / 1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
  }
  :root.dark {
    --color-text-muted: rgb(var(--color-gray-400) / 1);
    --color-outline-focus: rgb(var(--color-blue-700) / 1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.3), 0 4px 6px -4px rgb(0 0 0 / 0.3);
  }
}
```

Tailwind 설정:

```javascript
module.exports = {
  boxShadow: {
    lg: "var(--shadow-lg)",
  },
  extend: {
    colors: {
      "text-muted": "var(--color-text-muted)",
      "outline-focus": "var(--color-outline-focus)"
    }
  }
}
```

이 접근 방식은 팀원들이 `-border-base`, `-border-focus`, `-border-focus-danger`와 같은 추가 시맨틱 클래스를 정의하도록 강제했고, 동시에 이러한 규칙이 없는 오래된 UI 컴포넌트를 업데이트할 수 있게 했습니다.

## 작은 디테일에 스포트라이트를

### 전환의 부드러움

테마 전환 시 CSS 전환(transition)을 강제로 비활성화하여 색상이 천천히 페이드되는 것을 방지하고, 더 빠른 전환 경험을 만들었습니다.

### 브라우저 신호

`<meta name="color-scheme" />` 속성은 다크 테마 지원을 신호하여, 스크롤바와 자동완성 색상에 대한 더 나은 기본값을 설정하고, 느린 연결에서 페이지 로드 시 흰색 깜빡임을 방지합니다. 메타 태그는 CSS 로딩이 완료되기 전에 효과를 발휘합니다.

### 즉각적인 환경설정 적용

문서 head에 있는 인라인 `<script>`가 사용자 테마 환경설정을 즉시 읽어, 다크 모드 운영체제에서 라이트 모드를 선호하는 사용자들의 지연을 방지합니다.

## 아직도 여기 있나요? 넘겨주세요

저희 팀은 아직 해야 할 작업이 남아있음을 인정합니다:

- 비관리 콘솔 웹 페이지들(로그인, 기기 인증)은 여전히 다크 모드 지원이 필요합니다
- 현재의 불투명도 해결책을 넘어 색상 팔레트를 더 다듬어야 합니다
- 수많은 커스텀 스타일(포커스 및 호버 상태)에 다크 모드 적응이 필요합니다
- 시맨틱 변수가 포괄적이지 않습니다
- 관리 콘솔과 모바일 클라이언트 다크 모드 구현 간에 불일치가 존재합니다

## 결론

디자인 시스템은 결코 "완료"되지 않습니다. 끊임없이 진화하며, 다크 모드도 예외가 아닙니다. 불완전한 작업에도 불구하고, 사용자들이 즐길 수 있는 기능적인 다크 모드를 출시하면서 동시에 디자인 시스템을 강화한 것은 성공이었습니다.

---

*이 글은 Tailscale 블로그의 [Heart of dark mode: done, and still in progress](https://tailscale.com/blog/heart-of-dark-mode)를 한국어로 번역한 것입니다.*
