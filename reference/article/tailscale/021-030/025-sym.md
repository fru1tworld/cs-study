# DevOps를 위한 Tailscale: Sym을 통한 Tailscale 리소스 온디맨드 접근

게시일: 2022년 8월 3일
작성자: David Crawshaw

---

권한 있는 접근(privileged access)을 관리하면 민감한 리소스와 고객 데이터에 대한 불필요한 접근을 줄여 보안을 개선하는 데 도움이 됩니다. Tailscale ACL을 사용하면 이미 회사 리소스에 대한 접근을 관리하고 "기본 거부(default deny)" 규칙으로 접근을 제한할 수 있습니다.

하지만 긴급 상황이 발생하여 당직자(on-call person)가 프로덕션 환경에 접근해야 한다면 어떻게 해야 할까요? 이 문제를 해결하기 위해 우리는 Sym과 파트너십을 맺게 되어 기쁩니다! 이제 사용자는 Slack을 통해 Tailscale의 민감한 리소스에 대한 임시 접근을 쉽게 요청할 수 있습니다. 이러한 요청은 팀원들이 Slack에서 직접 승인할 수 있으며, 당직 엔지니어와 같은 특정 사람들에게는 자동으로 승인되도록 설정할 수도 있습니다.

![Tailscale 로고와 Sym 로고 연결 이미지]

## Sym 접근 요청 기반의 권한 에스컬레이션

Tailscale은 사용자가 코드로 정의된 접근 규칙을 통해 프로덕션 환경 및 데이터베이스와 같은 네트워크 리소스에 안전하게 접근할 수 있도록 도와줍니다. 그러나 때때로 사용자는 현재 접근 권한이 없는 리소스가 필요할 수 있습니다. 예를 들어, 사용자가 문제를 디버깅해야 하거나, 당직 직원이 긴급 상황 중에 상승된 접근 권한을 요청해야 할 수 있습니다. 바로 이럴 때 *온디맨드 접근(on-demand access)*이 도움이 됩니다.

Sym은 코드로서의 지능형 승인(intelligent approvals as code)을 제공하며, 팀이 전체 인프라에 대한 권한 있는 접근 관리를 중앙 집중화할 수 있게 해줍니다. 이를 통해 엔지니어는 특정 작업을 완료하는 데 필요한 민감한 리소스에 대한 임시 접근을 요청할 수 있습니다.

Sym을 사용하면 사용자는 Tailscale ACL에 정의된 그룹의 멤버십을 요청하여 Tailscale 네트워크의 리소스에 대한 시간 제한 접근을 얻을 수 있습니다. 그리고 Tailscale SSH도 ACL에서 SSH 접근 규칙을 정의하므로, SSH 접근을 허용하는 접근 규칙이 있는 경우 Sym을 사용하여 그룹 멤버십을 업데이트함으로써 SSH 접근을 부여할 수 있습니다.

Tailscale과 함께 Sym을 사용하려면:

- Tailscale에서 특정 리소스에 접근할 수 있는 그룹을 정의하는 ACL을 생성합니다. 예를 들어, `group:prod`가 `tag:prod`에 접근할 수 있도록 허용합니다.
- 문서를 따라 Tailscale을 Sym과 통합합니다.
- 그런 다음 개인은 Slack에서 `/sym req`를 사용하여 시간 제한 접근을 요청할 수 있습니다. 예를 들어 `group:prod`에 대한 접근을 요청할 수 있습니다.

승인되면 요청한 사용자는 에스컬레이션된 Tailscale ACL 그룹이 접근 권한을 부여하는 노드에 접근하거나 인스턴스에 SSH로 접속할 수 있게 됩니다. 그런 다음 요청에서 지정한 시간이 지나면 Sym이 자동으로 사용자의 접근 권한을 해제합니다.

Sym은 또한 요청에 대한 특별한 라우팅 규칙을 지정하거나 사용자의 신원(identity), 당직 상태(on-call status), 또는 Okta 그룹 멤버십을 기반으로 승인을 자동화하는 데 사용할 수 있는 Python SDK를 제공합니다.

![Tailscale group:prod에 대한 접근 요청 애니메이션 GIF]

Tailscale에 대한 온디맨드 접근을 시작하려면 Sym 문서를 확인하세요.

## Okta 그룹을 사용한 Tailscale 접근 요청

Tailscale에서 Okta 사용자 및 그룹 프로비저닝을 사용하고 있다면, Sym을 사용하여 Okta에서 Tailscale로 동기화된 그룹의 멤버십 접근도 관리할 수 있습니다. 이 경우 Sym의 Okta 통합을 사용하고 Tailscale ACL에 포함된 각 Okta 그룹에 대해 Sym 접근 플로우를 설정하세요.

## Sym과 Tailscale

Sym을 사용하여 프로덕션 환경에 대한 SSH 접근을 포함하여 Tailscale 네트워크의 민감한 리소스에 대한 접근을 요청할 수 있습니다. Tailscale과 함께 Sym을 사용하면 다음과 같은 이점이 있습니다:

- 인시던트 발생 시 엔지니어에게 프로덕션 리소스에 대한 시간 제한 SSH 접근을 부여합니다.
- 새로운 팀원이 자신의 역할에 따라 적절한 리소스에 접근할 수 있도록 보장합니다.
- Sym SDK를 사용하여 PagerDuty에서 누가 당직인지에 따라 Tailscale 리소스 요청에 대한 승인을 자동화합니다.
- 컨텍스트를 잃지 않고 Slack에서 모든 요청과 승인을 관리합니다!

Sym을 사용하여 Tailscale 리소스에 대한 접근 관리를 시작하려면 문서를 참조하세요.

---

원문: [https://tailscale.com/blog/sym](https://tailscale.com/blog/sym)
