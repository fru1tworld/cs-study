# 코루틴

애플리케이션은 종종 사용자 입력에 응답하거나, 데이터를 로드하거나, 화면을 업데이트하는 등 여러 작업을 동시에 수행해야 합니다. 이를 지원하기 위해 애플리케이션은 **동시성(concurrency)**에 의존하며, 이를 통해 작업들이 서로를 차단하지 않고 독립적으로 실행될 수 있습니다.

## 전통적인 스레딩 접근 방식

가장 일반적인 방법은 스레드를 사용하는 것입니다. 스레드는 OS가 관리하는 독립적인 실행 경로입니다. 그러나 스레드는 상대적으로 무겁고, 많이 생성하면 성능 문제가 발생할 수 있습니다.

## Kotlin의 해결책: 코루틴

Kotlin은 코루틴을 중심으로 구축된 비동기 프로그래밍을 제공합니다:

- 일시 중단 함수(suspending functions)를 사용하여 자연스럽고 순차적인 스타일로 비동기 코드 작성
- 스레드의 가벼운 대안
- 시스템 리소스를 차단하지 않고 일시 중단 가능
- 리소스 친화적이며 세밀한 동시성에 더 적합

**주요 라이브러리:** `kotlinx.coroutines` - 코루틴 시작, 동시성 처리, 비동기 스트림 작업 등을 위한 도구를 제공합니다.

**시작하기:** 일시 중단 함수, 코루틴 빌더, 구조적 동시성을 포함한 핵심 개념은 [코루틴 기초](coroutines-basics.md) 가이드에서 시작하세요.

---

## 코루틴 개념

### 1. 일시 중단 함수와 코루틴 빌더

**일시 중단 함수:**
- `suspend` 키워드를 기반으로 구축됨
- 스레드를 차단하지 않고 코드를 일시 중지하고 재개할 수 있음
- 장기 실행 작업을 비동기적으로 실행할 수 있음

**코루틴 빌더:**
- **`.launch()`** - 새로운 코루틴을 시작
- **`.async()`** - 새로운 코루틴을 시작하고 결과를 반환
- 둘 다 `CoroutineScope`의 확장 함수
- `CoroutineScope`는 코루틴의 생명주기를 정의하고 코루틴 컨텍스트를 제공

**리소스:** [코루틴 기초](coroutines-basics.md)와 [일시 중단 함수 합성](composing-suspending-functions.md)에서 자세히 알아보세요.

### 2. 코루틴 컨텍스트와 동작

`CoroutineScope`에서 코루틴을 시작하면 실행을 제어하는 컨텍스트가 생성됩니다. 빌더 함수는 코루틴 동작을 정의하는 요소들을 자동으로 생성합니다:

**주요 컨텍스트 요소:**

| 요소 | 목적 |
|------|------|
| **`Job`** | 코루틴의 생명주기를 추적; 구조적 동시성을 가능하게 함 |
| **`CoroutineDispatcher`** | 코루틴이 실행되는 위치를 제어 (백그라운드 스레드, 메인 스레드 등) |
| **`CoroutineExceptionHandler`** | 처리되지 않은 예외를 처리 |

**컨텍스트 계층:**
- 컨텍스트는 기본적으로 코루틴의 부모로부터 상속됨
- 구조적 동시성을 가능하게 하는 계층 구조를 형성
- 관련 코루틴들을 함께 취소하거나 예외를 그룹으로 처리할 수 있음
- 참고: [코루틴 컨텍스트와 디스패처](coroutine-context-and-dispatchers.md), [취소와 타임아웃](cancellation-and-timeouts.md), [예외 처리](exception-handling.md)

### 3. 비동기 Flow와 공유 가변 상태

**코루틴 간 통신 옵션:**

| 옵션 | 목적 |
|------|------|
| **`Flow`** | 코루틴이 적극적으로 수집할 때만 값을 생성 |
| **`Channel`** | 여러 코루틴이 값을 송수신할 수 있음; 각 값은 정확히 하나의 코루틴에 전달 |
| **`SharedFlow`** | 모든 활성 수집 코루틴에 모든 값을 지속적으로 공유 |

**공유 가변 상태 관리:**
- **문제:** 여러 코루틴이 동일한 데이터에 접근/업데이트하면 경쟁 조건이 발생할 수 있음
- **해결책:** `StateFlow`를 사용하여 공유 데이터를 래핑
- 하나의 코루틴에서 업데이트하고 다른 코루틴에서 최신 값을 수집

**리소스:** [비동기 Flow](flow.md), [채널](channels.md), [코루틴과 채널 튜토리얼](coroutines-and-channels.md)

---

## 다음 단계 - 학습 경로

1. **기초** - [코루틴 기초 가이드](coroutines-basics.md)
2. **고급 합성** - [일시 중단 함수 합성](composing-suspending-functions.md)
3. **디버깅** - IntelliJ IDEA로 코루틴 디버그
4. **Flow 디버깅** - IntelliJ IDEA로 Kotlin Flow 디버그
5. **UI 개발** - 코루틴을 사용한 UI 프로그래밍 가이드
6. **Android 모범 사례** - 코루틴 모범 사례
7. **API 참조** - `kotlinx.coroutines` API

---

## 관련 주제

- **이전:** [비동기 프로그래밍 기법](async-programming.md)
- **다음:** [리플렉션](reflection.md)
