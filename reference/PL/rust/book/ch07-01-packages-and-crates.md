# 패키지와 크레이트

## 개요

모듈 시스템의 첫 번째 부분은 패키지와 크레이트입니다.

## 크레이트

**크레이트**는 Rust 컴파일러가 한 번에 고려하는 가장 작은 코드 단위입니다. `cargo` 대신 `rustc`를 실행하고 단일 소스 코드 파일을 전달하더라도 컴파일러는 해당 파일을 크레이트로 간주합니다. 크레이트는 모듈을 포함할 수 있으며, 모듈은 크레이트와 함께 컴파일되는 다른 파일에 정의될 수 있습니다.

크레이트는 두 가지 형태 중 하나로 제공됩니다:

### 바이너리 크레이트
- 실행할 수 있는 실행 파일로 컴파일할 수 있는 프로그램 (명령줄 프로그램, 서버 등)
- 실행 파일이 실행될 때 발생하는 일을 정의하는 `main` 함수가 있어야 함
- 지금까지 만든 모든 크레이트는 바이너리 크레이트였음

### 라이브러리 크레이트
- `main` 함수가 없고 실행 파일로 컴파일되지 않음
- 여러 프로젝트와 공유할 기능을 정의
- 예: `rand` 크레이트는 난수를 생성하는 기능을 제공
- Rustacean들이 "크레이트"라고 말할 때, 일반적으로 라이브러리 크레이트를 의미하며 일반적인 프로그래밍 개념인 "라이브러리"와 교환하여 사용

## 크레이트 루트

**크레이트 루트**는 Rust 컴파일러가 시작하는 소스 파일이며 크레이트의 루트 모듈을 구성합니다.

## 패키지

**패키지**는 기능 세트를 제공하는 하나 이상의 크레이트 번들입니다. 패키지에는 해당 크레이트를 빌드하는 방법을 설명하는 **Cargo.toml** 파일이 포함되어 있습니다.

예: Cargo는 다음을 포함하는 패키지입니다:
- 명령줄 도구용 바이너리 크레이트
- 바이너리 크레이트가 의존하는 라이브러리 크레이트
- 다른 프로젝트가 Cargo 라이브러리 크레이트에 의존하여 동일한 로직을 사용할 수 있음

### 패키지 규칙
- 원하는 만큼 많은 바이너리 크레이트를 포함할 수 있음
- 최대 하나의 라이브러리 크레이트만 포함할 수 있음
- 최소한 하나의 크레이트 (라이브러리 또는 바이너리)를 포함해야 함

## 패키지 생성 예제

```bash
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

`cargo new my-project` 실행 후:
- **Cargo.toml** 파일이 생성됨 (패키지를 제공)
- **main.rs**가 포함된 **src** 디렉토리가 생성됨

## Cargo 규칙

Cargo는 크레이트 루트에 대한 규칙을 따릅니다:

- **src/main.rs**는 패키지와 같은 이름을 가진 바이너리 크레이트의 크레이트 루트입니다
- **src/lib.rs**는 패키지가 패키지와 같은 이름을 가진 라이브러리 크레이트를 포함함을 나타내며, **src/lib.rs**가 크레이트 루트입니다
- Cargo는 라이브러리나 바이너리를 빌드하기 위해 크레이트 루트 파일을 `rustc`에 전달합니다

## 패키지 구조 예제

### 바이너리만
**src/main.rs**만 포함하는 패키지는 `my-project`라는 바이너리 크레이트만 포함합니다

### 바이너리와 라이브러리
**src/main.rs**와 **src/lib.rs**를 모두 포함하는 패키지는 두 개의 크레이트를 가집니다:
- 바이너리 크레이트
- 라이브러리 크레이트
- 둘 다 패키지와 같은 이름을 가짐

### 여러 바이너리
패키지는 **src/bin** 디렉토리에 파일을 배치하여 여러 바이너리 크레이트를 가질 수 있습니다. 각 파일은 별도의 바이너리 크레이트가 됩니다.
